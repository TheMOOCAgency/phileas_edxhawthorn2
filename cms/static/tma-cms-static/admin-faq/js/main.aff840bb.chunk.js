(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,a,t){"use strict";t.r(a);var n=t(0),i=t.n(n),c=t(10),l=t.n(c),o=t(17),s=t(73),r=t(74),d=t(88),u=t(75),m=t(18),h=t(89),p=t(183),g=t(30),b=(t(98),t(197)),f=t(181),v=t(77),E=t.n(v);var T=function(e){var a=e.topics,t=(a=a.slice(0,4)).map(function(e,a){return i.a.createElement(f.a,{key:e.nameTopic+a,label:e.nameTopic,value:a})});return i.a.createElement("div",{id:"tabsWrapper"},i.a.createElement(b.a,{id:"tabsElementWrapper",value:e.selectedTopic,indicatorColor:"primary",onChange:e.handleChangeTabTopic,variant:"fullWidth"},t),e.topics.length<4&&i.a.createElement(p.a,{id:"addTopicButton",color:"primary",size:"small",variant:"contained",onClick:function(a){e.addField("topic",a)}}," ",i.a.createElement(E.a,null)," "))},C=t(195),S=t(200);var y=function(e){return i.a.createElement("div",{className:"langPicker",style:{textAlign:"right",padding:" 10px 0px"}},i.a.createElement(C.a,{value:e.lang,onChange:e.selectLang},i.a.createElement(S.a,{value:"fr"},"Fr"),i.a.createElement(S.a,{value:"en"},"En")))},N=t(87),k=(t(107),t(86)),j=t(198),O=t(140),F=t(202),I=t(81),w=t.n(I),D=t(82),q=t.n(D),A=t(80),J=t.n(A),x=t(185),z=t(186),W=t(187),L=t(201),Q=t(188),_=t(189),V=t(190),U=t(58),B=t.n(U),P=t(196),M=(t(128),t(129),t(130),t(132),t(134),t(72),{en:{name:"Name",image:"Image",delete:"Delete",addSubTopic:"Add a subTopics",subTopicName:"Subtopics name",addQuestion:"Add a question",answer:"Answer",cancel:"Cancel",submit:"Submit",onChange:"Unsaved changes"},fr:{name:"Nom",image:"Ic\xf4ne",delete:"Supprimer",addSubTopic:"Ajouter un sous-topic",subTopicName:"Nom de sous-topic",addQuestion:"Ajouter une question",answer:"R\xe9ponse",cancel:"Annuler",submit:"Valider",onChange:"Des changements sont en cours "}});function R(e){var a=i.a.useState(!1),t=Object(N.a)(a,2),n=t[0],c=t[1],l=e.topics;l=l.slice(0,4);var s=function(){c(!1)},r=function(){c(!0)},d=l.map(function(a,t){var n;return i.a.createElement("div",{className:"tabTopic",key:a+t},i.a.createElement(x.a,{className:"topicInput"},i.a.createElement(z.a,null,i.a.createElement("center",null,i.a.createElement("h4",null,a.nameTopic))),i.a.createElement(W.a,null,i.a.createElement("div",{className:"TopicName"},i.a.createElement("div",{className:"inputTopicWrapper"},i.a.createElement(P.a,{className:"inputTopic",label:"Nom",onChange:function(a){e.handleChange(a.target.value,[t,"topic","name"])},value:a.nameTopic}),i.a.createElement(P.a,{className:"inputTopic",label:"ic\xf4ne",onChange:function(a){e.handleChange(a.target.value,[t,"topic","icon"])},value:a.icon,InputProps:{endAdornment:i.a.createElement(F.a,{position:"end"},i.a.createElement(O.a,{edge:"end","aria-label":"Toggle Image",onClick:r},i.a.createElement(w.a,{size:"small"})))}})),i.a.createElement("div",null,i.a.createElement(p.a,{className:"buttonStylised",color:"primary",style:{color:"#fff"},variant:"contained",onClick:function(a){e.addField("subTopic",t)},size:"small"},M[e.lang].addSubTopic," "),i.a.createElement(p.a,{className:"buttonStylised",color:"secondary",style:{color:"#fff"},variant:"contained",onClick:function(a){e.removeField("topic",t)},size:"small"},M[e.lang].delete))))),i.a.createElement("div",{className:"topicContent"},i.a.cloneElement(e.children,{topics:l[t],idx:t})),i.a.createElement("div",{className:"buttonWrapper"},i.a.createElement(p.a,{className:"submitJson buttonStylised",style:{color:"#fff"},color:"primary",size:"small",variant:"contained",onClick:function(a){e.handleSubmit(a)}}," ",M[e.lang].submit),!0===e.change&&i.a.createElement("div",{id:"cancel"},i.a.createElement("p",{className:"buttonStylised warningChange"},"Des Changements sont en cours"),i.a.createElement(p.a,(n={className:"buttonStylised"},Object(o.a)(n,"className","reinitJson"),Object(o.a)(n,"style",{color:"#fff"}),Object(o.a)(n,"color","secondary"),Object(o.a)(n,"size","small"),Object(o.a)(n,"variant","contained"),Object(o.a)(n,"onClick",function(a){e.handleCancel(a)}),n)," ",M[e.lang].delete))))});return i.a.createElement(J.a,{axis:"x",index:e.selectedTopic,onChangeIndex:e.handleChangeTabTopic},d,i.a.createElement(j.a,{open:n,onClose:s,style:{textAlign:"center",display:"grid"}},i.a.createElement("div",null,i.a.createElement("span",{style:{height:"100%",verticalAlign:"middle",display:"inline-block"}}),i.a.createElement("img",{className:"previewImg",src:e.topics[e.selectedTopic].icon,alt:e.topics[e.selectedTopic].icon}),i.a.createElement(O.a,{style:{position:"absolute",backgroundColor:"#ff6d00"},edge:"end","aria-label":"Close Image",onClick:s,color:"secondary"},i.a.createElement(q.a,{style:{color:"white"},size:"small"})))))}function G(e){var a=e.topics.content.map(function(a,t){return i.a.createElement(L.a,{key:t},i.a.createElement(Q.a,{className:"sousTopic",expandIcon:i.a.createElement(B.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},i.a.createElement("h3",null,a.nameSubTopic)),i.a.createElement(_.a,{className:"subTopicFields"},i.a.createElement(P.a,{label:"Nom du sous-topic",onChange:function(a){e.handleChange(a.target.value,[e.idx,"subtopic",t])},fullWidth:!0,rows:"12",value:a.nameSubTopic}),i.a.cloneElement(e.children,{data:a.content,topic:e.idx,subTopic:t})),i.a.createElement(V.a,null,i.a.createElement(p.a,{color:"primary",onClick:function(a){e.addField("question",e.idx,t)},size:"small"},M[e.lang].addQuestion),i.a.createElement(p.a,{color:"secondary",onClick:function(a){e.removeField("subTopic",e.idx,t)},size:"small"},M[e.lang].delete)))});return i.a.createElement("div",null,a)}function X(e){var a=e.data.map(function(a,t){return i.a.createElement(L.a,{key:t},i.a.createElement(Q.a,{expandIcon:i.a.createElement(B.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},i.a.createElement("h4",null,a.question)),i.a.createElement(_.a,{className:"qAndAFields"},i.a.createElement(P.a,{label:"Question",fullWidth:!0,rows:"12",value:a.question,onChange:function(a){e.handleChange(a.target.value,[e.topic,e.subTopic,"question",t])}}),i.a.createElement("p",null,M[e.lang].response,":"),i.a.createElement(k.a,{inline:!0,className:"tiny",init:{plugins:"link image code"},initialValue:a.response,onChange:function(a){e.handleChange(a.level.content,[e.topic,e.subTopic,"response",t])}})),i.a.createElement(V.a,null,i.a.createElement(p.a,{color:"secondary",onClick:function(a){e.removeField("question",e.topic,e.subTopic,t)},size:"small"},M[e.lang].delete)))});return i.a.createElement("div",{className:"qAndAWrappers"},a)}var Y=t(191),H=t(84),K=t.n(H),Z={en:{submit:"Submit",cancel:"Cancel",createTopic:"Create a Topic",noTopic:"You have no topic",onChange:"Unsaved changes"},fr:{submit:"Valider",cancel:"Annuler",createTopic:"Cr\xe9er un topic",noTopic:"Vous n'avez aucun topic",onChange:"Des changements sont en cours"}},$=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).handleChangeSubtopic=function(e){return function(e,a){return!!a}},t.state={lang:"fr",selectedTopic:0,expanded:!1,data:[],dataOld:[],change:!1,loading:!0},t.handleChangeTabTopic=t.handleChangeTabTopic.bind(Object(m.a)(t)),t.handleChangeSubtopic=t.handleChangeSubtopic.bind(Object(m.a)(t)),t.handleChange=t.handleChange.bind(Object(m.a)(t)),t.handleSubmit=t.handleSubmit.bind(Object(m.a)(t)),t.handleCancel=t.handleCancel.bind(Object(m.a)(t)),t.addField=t.addField.bind(Object(m.a)(t)),t.removeField=t.removeField.bind(Object(m.a)(t)),t.initData=t.initData.bind(Object(m.a)(t)),t.fetchingData=t.fetchingData.bind(Object(m.a)(t)),t.postingData=t.postingData.bind(Object(m.a)(t)),t.selectLang=t.selectLang.bind(Object(m.a)(t)),t}return Object(h.a)(a,e),Object(r.a)(a,[{key:"fetchingData",value:function(){var e=this;fetch("/tma_cms_apps/api/v1/microsite_manager/json/"+window.siteID.siteID+"/faq/",{credentials:"same-origin",method:"GET"}).then(function(e){return e.json()}).then(function(a){var t=a;e.setState({data:g.a.fromJS(t),loading:!1,dataOld:g.a.fromJS(t)})})}},{key:"postingData",value:function(){var e=this;fetch("/tma_cms_apps/api/v1/microsite_manager/json/"+window.siteID.siteID+"/faq/",{credentials:"same-origin",method:"PUT",body:JSON.stringify(this.state.data.toJS()),headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":window.csrf}}).then(function(e){return e.json()}).then(function(a){e.fetchingData()})}},{key:"selectLang",value:function(e){this.setState({lang:e.target.value,selectedTopic:0})}},{key:"handleChangeTabTopic",value:function(e,a){this.setState({selectedTopic:a})}},{key:"addField",value:function(e,a,t){var n=this;if("topic"===e&&this.setState(function(e){return{data:e.data.updateIn([n.state.lang],function(e){return e.push(g.a.fromJS({content:[],icon:"",idTopic:"",nameTopic:"TopicName"}))})}}),"subTopic"===e&&this.setState(function(e){return{data:e.data.updateIn([n.state.lang,a,"content"],function(e){return e.push(g.a.fromJS({nameSubTopic:"SubTopicName",content:[]}))})}}),"question"===e){var i=K()(10);this.setState(function(e){return{data:e.data.updateIn([n.state.lang,a,"content",t,"content"],function(e){return e.push(g.a.fromJS({namequestion:"Question",questionId:i,question:"Question",response:""}))})}})}}},{key:"removeField",value:function(e,a,t,n){var i=this;"topic"===e&&(this.state.selectedTopic>this.state.data.toJS()[this.state.lang].length-2?this.setState(function(e){var t=e.data;return{selectedTopic:a>0?a-1:0,data:t.deleteIn([i.state.lang,a])}}):this.setState(function(e){return{data:e.data.deleteIn([i.state.lang,a])}})),"subTopic"===e&&this.setState(function(e){return{data:e.data.deleteIn([i.state.lang,a,"content",t])}}),"question"===e&&this.setState(function(e){return{data:e.data.deleteIn([i.state.lang,a,"content",t,"content",n])}})}},{key:"handleChange",value:function(e,a){var t=this;"topic"===a[1]?"name"===a[2]?this.setState(function(n){return{data:n.data.updateIn([t.state.lang,a[0],"nameTopic"],function(a){return e})}}):"icon"===a[2]&&this.setState(function(n){return{data:n.data.updateIn([t.state.lang,a[0],"icon"],function(a){return e})}}):"subtopic"===a[1]?this.setState(function(n){return{data:n.data.updateIn([t.state.lang,a[0],"content",a[2],"nameSubTopic"],function(a){return e})}}):"question"===a[2]?this.setState(function(n){return{data:n.data.updateIn([t.state.lang,a[0],"content",a[1],"content",a[3],"question"],function(a){return e})}}):"response"===a[2]&&this.setState(function(n){return{data:n.data.updateIn([t.state.lang,a[0],"content",a[1],"content",a[3],"response"],function(a){return e})}})}},{key:"detecteChange",value:function(e){this.setState({change:e})}},{key:"handleSubmit",value:function(e){this.postingData()}},{key:"handleCancel",value:function(){this.fetchingData()}},{key:"componentWillMount",value:function(){0===this.state.data.length?this.fetchingData():alert("Ereur lors de la r\xe9cup\xe9ration des donn\xe9es, veuillez contacter un administrateur !")}},{key:"componentDidUpdate",value:function(){this.state.data.equals(this.state.dataOld)?this.state.change&&this.detecteChange(!1):this.state.change||this.detecteChange(!0)}},{key:"initData",value:function(){var e=this;this.setState(function(a){return{data:a.data.updateIn([e.state.lang],function(e){return e.push(g.a.fromJS({content:[],icon:"",idTopic:"",nameTopic:"TopicName"}))})}})}},{key:"render",value:function(){var e,a=this;return i.a.createElement("div",{className:"wrapperFAQ"},i.a.createElement("h1",null,"Administration FAQ ",i.a.createElement("a",{href:"/studio-new.phileasamundi.com/assets/course-v1:global+000+2019/"},"Manage images")),this.state.loading?i.a.createElement(Y.a,null):0===this.state.data.toJS()[this.state.lang].length?i.a.createElement("div",null,i.a.createElement(y,{selectLang:this.selectLang,lang:this.state.lang}),i.a.createElement("div",{className:"noTopic"}," Vous n'avez aucun topic",i.a.createElement(p.a,{id:"initTopicButton",color:"primary",variant:"contained",onClick:function(){a.initData()}},Z[this.state.lang].createTopic),i.a.createElement("div",{className:"buttonWrapper"},!0===this.state.change&&i.a.createElement("div",null,i.a.createElement(p.a,{className:"submitJson buttonStylised",style:{color:"#fff"},color:"primary",size:"small",variant:"contained",onClick:function(e){a.handleSubmit(e)}}," ",Z[this.state.lang].submit),i.a.createElement("div",{id:"cancel"},i.a.createElement("p",{className:"buttonStylised warningChange"},Z[this.state.lang].onChange),i.a.createElement(p.a,(e={className:"buttonStylised"},Object(o.a)(e,"className","reinitJson"),Object(o.a)(e,"style",{color:"#fff"}),Object(o.a)(e,"color","secondary"),Object(o.a)(e,"size","small"),Object(o.a)(e,"variant","contained"),Object(o.a)(e,"onClick",function(e){a.handleCancel(e)}),e)," ",Z[this.state.lang].cancel," ")))))):i.a.createElement("div",{id:"mainWrapper"},i.a.createElement(y,{selectLang:this.selectLang,lang:this.state.lang}),i.a.createElement(T,{topics:this.state.data.toJS()[this.state.lang],selectedTopic:this.state.selectedTopic,handleChangeTabTopic:this.handleChangeTabTopic,addField:this.addField}),i.a.createElement(R,{lang:this.state.lang,change:this.state.change,handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,topics:this.state.data.toJS()[this.state.lang],selectedTopic:this.state.selectedTopic,removeField:this.removeField,handleChangeTabTopic:this.handleChangeTabTopic,handleChange:this.handleChange,addField:this.addField},i.a.createElement(G,{lang:this.state.lang,handleChange:this.handleChange,selectedTopic:this.state.selectedTopic,addField:this.addField,removeField:this.removeField},i.a.createElement(X,{lang:this.state.lang,handleChange:this.handleChange,addField:this.addField,removeField:this.removeField})))))}}]),a}(i.a.Component),ee=t(199),ae=t(85),te=t(193),ne=t(192),ie=Object(ae.a)({palette:{primary:{main:"#5cb7d8"},secondary:ne.a},background:"#5cb7d8"});l.a.render(i.a.createElement(te.a,{theme:ie},i.a.createElement(ee.a,null),i.a.createElement($,null)),document.getElementById("root"))},93:function(e,a,t){e.exports=t(137)},98:function(e,a,t){}},[[93,1,2]]]);
//# sourceMappingURL=main.aff840bb.chunk.js.map