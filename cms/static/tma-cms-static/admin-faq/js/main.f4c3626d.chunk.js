(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,a,t){"use strict";t.r(a);var n=t(0),i=t.n(n),l=t(10),c=t.n(l),o=t(17),s=t(73),r=t(74),d=t(87),u=t(75),m=t(18),h=t(88),p=t(182),g=t(30),b=(t(97),t(196)),f=t(180),v=t(77),E=t.n(v);var T=function(e){var a=e.topics,t=(a=a.slice(0,4)).map(function(e,a){return i.a.createElement(f.a,{key:e.nameTopic+a,label:e.nameTopic,value:a})});return i.a.createElement("div",{id:"tabsWrapper"},i.a.createElement(b.a,{id:"tabsElementWrapper",value:e.selectedTopic,indicatorColor:"primary",onChange:e.handleChangeTabTopic,variant:"fullWidth"},t),e.topics.length<4&&i.a.createElement(p.a,{id:"addTopicButton",color:"primary",size:"small",variant:"contained",onClick:function(a){e.addField("topic",a)}}," ",i.a.createElement(E.a,null)," "))},C=t(194),y=t(199);var S=function(e){return i.a.createElement("div",{className:"langPicker",style:{textAlign:"right",padding:" 10px 0px"}},i.a.createElement(C.a,{value:e.lang,onChange:e.selectLang},i.a.createElement(y.a,{value:"fr"},"Fr"),i.a.createElement(y.a,{value:"en"},"En")))},k=t(86),j=(t(106),t(85)),N=t(197),F=t(139),O=t(201),I=t(81),w=t.n(I),D=t(82),q=t.n(D),A=t(80),x=t.n(A),J=t(184),z=t(185),L=t(186),W=t(200),Q=t(187),_=t(188),M=t(189),R=t(58),V=t.n(R),B=t(195),P=(t(127),t(128),t(129),t(131),t(133),t(72),{en:{name:"name",image:"Image",addSubTopic:"Add a subtopic",nameSubTopic:"Subtopic name",addQuestion:"Add a question",question:"Question",answer:"Answer",delete:"Delete",submit:"Submit",cancel:"Cancel",onChange:"Unsaved changes",tinyMCELang:""},fr:{name:"Nom",image:"Ic\xf4ne",addSubTopic:"Ajouter un sous-topic",nameSubTopic:"Nom du sous-topic",addQuestion:"Ajouter une question",question:"Question",answer:"R\xe9ponse",delete:"Supprimer",submit:"Valider",cancel:"Annuler",onChange:"Des changements sont en cours",tinyMCELang:"fr_FR"}});function U(e){var a=i.a.useState(!1),t=Object(k.a)(a,2),n=t[0],l=t[1],c=e.topics;c=c.slice(0,4);var s=function(){l(!1)},r=function(){l(!0)},d=c.map(function(a,t){var n;return i.a.createElement("div",{className:"tabTopic",key:a+t},i.a.createElement(J.a,{className:"topicInput"},i.a.createElement(z.a,null,i.a.createElement("center",null,i.a.createElement("h4",null,a.nameTopic))),i.a.createElement(L.a,null,i.a.createElement("div",{className:"TopicName"},i.a.createElement("div",{className:"inputTopicWrapper"},i.a.createElement(B.a,{className:"inputTopic",label:P[e.lang].name,onChange:function(a){e.handleChange(a.target.value,[t,"topic","name"])},value:a.nameTopic}),i.a.createElement(B.a,{className:"inputTopic",label:P[e.lang].image,onChange:function(a){e.handleChange(a.target.value,[t,"topic","icon"])},value:a.icon,InputProps:{endAdornment:i.a.createElement(O.a,{position:"end"},i.a.createElement(F.a,{edge:"end","aria-label":"Toggle Image",onClick:r},i.a.createElement(w.a,{size:"small"})))}})),i.a.createElement("div",null,i.a.createElement(p.a,{className:"buttonStylised",color:"primary",style:{color:"#fff"},variant:"contained",onClick:function(a){e.addField("subTopic",t)},size:"small"},P[e.lang].addSubTopic," "),i.a.createElement(p.a,{className:"buttonStylised",color:"secondary",style:{color:"#fff"},variant:"contained",onClick:function(a){e.removeField("topic",t)},size:"small"},P[e.lang].delete))))),i.a.createElement("div",{className:"topicContent"},i.a.cloneElement(e.children,{topics:c[t],idx:t})),i.a.createElement("div",{className:"buttonWrapper"},i.a.createElement(p.a,{className:"submitJson buttonStylised",style:{color:"#fff"},color:"primary",size:"small",variant:"contained",onClick:function(a){e.handleSubmit(a)}}," ",P[e.lang].submit),!0===e.change&&i.a.createElement("div",{id:"cancel"},i.a.createElement("p",{className:"buttonStylised warningChange"},P[e.lang].onChange),i.a.createElement(p.a,(n={className:"buttonStylised"},Object(o.a)(n,"className","reinitJson"),Object(o.a)(n,"style",{color:"#fff"}),Object(o.a)(n,"color","secondary"),Object(o.a)(n,"size","small"),Object(o.a)(n,"variant","contained"),Object(o.a)(n,"onClick",function(a){e.handleCancel(a)}),n)," ",P[e.lang].cancel," "))))});return i.a.createElement(x.a,{axis:"x",index:e.selectedTopic,onChangeIndex:e.handleChangeTabTopic},d,i.a.createElement(N.a,{open:n,onClose:s,style:{textAlign:"center",display:"grid"}},i.a.createElement("div",null,i.a.createElement("span",{style:{height:"100%",verticalAlign:"middle",display:"inline-block"}}),i.a.createElement("img",{className:"previewImg",src:e.topics[e.selectedTopic].icon,alt:e.topics[e.selectedTopic].icon}),i.a.createElement(F.a,{style:{position:"absolute",backgroundColor:"#ff6d00"},edge:"end","aria-label":"Close Image",onClick:s,color:"secondary"},i.a.createElement(q.a,{style:{color:"white"},size:"small"})))))}function G(e){var a=e.topics.content.map(function(a,t){return i.a.createElement(W.a,{key:t},i.a.createElement(Q.a,{className:"sousTopic",expandIcon:i.a.createElement(V.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},i.a.createElement("h3",null,a.nameSubTopic)),i.a.createElement(_.a,{className:"subTopicFields"},i.a.createElement(B.a,{label:P[e.lang].SubTopicName,onChange:function(a){e.handleChange(a.target.value,[e.idx,"subtopic",t])},fullWidth:!0,rows:"12",value:a.nameSubTopic}),i.a.cloneElement(e.children,{data:a.content,topic:e.idx,subTopic:t})),i.a.createElement(M.a,null,i.a.createElement(p.a,{color:"primary",onClick:function(a){e.addField("question",e.idx,t)},size:"small"},P[e.lang].addQuestion," "),i.a.createElement(p.a,{color:"secondary",onClick:function(a){e.removeField("subTopic",e.idx,t)},size:"small"},P[e.lang].delete)))});return i.a.createElement("div",null,a)}function X(e){var a=e.data.map(function(a,t){return i.a.createElement(W.a,{key:t},i.a.createElement(Q.a,{expandIcon:i.a.createElement(V.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},i.a.createElement("h4",null,a.question)),i.a.createElement(_.a,{className:"qAndAFields"},i.a.createElement(B.a,{label:"Question",fullWidth:!0,rows:"12",value:a.question,onChange:function(a){e.handleChange(a.target.value,[e.topic,e.subTopic,"question",t])}}),i.a.createElement("p",null,P[e.lang].answer),i.a.createElement(j.a,{inline:!0,className:"tiny",init:{language_url:window.tineMceFR,language:P[e.lang].tinyMCELang,plugins:"link image code"},initialValue:a.response,onChange:function(a){e.handleChange(a.level.content,[e.topic,e.subTopic,"response",t])}})),i.a.createElement(M.a,null,i.a.createElement(p.a,{color:"secondary",onClick:function(a){e.removeField("question",e.topic,e.subTopic,t)},size:"small"},P[e.lang].delete)))});return i.a.createElement("div",{className:"qAndAWrappers"},a)}var H=t(190),K=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).handleChangeSubtopic=function(e){return function(e,a){return!!a}},t.state={lang:"fr",selectedTopic:0,expanded:!1,data:[],dataOld:[],change:!1,loading:!0},t.handleChangeTabTopic=t.handleChangeTabTopic.bind(Object(m.a)(t)),t.handleChangeSubtopic=t.handleChangeSubtopic.bind(Object(m.a)(t)),t.handleChange=t.handleChange.bind(Object(m.a)(t)),t.handleSubmit=t.handleSubmit.bind(Object(m.a)(t)),t.handleCancel=t.handleCancel.bind(Object(m.a)(t)),t.addField=t.addField.bind(Object(m.a)(t)),t.removeField=t.removeField.bind(Object(m.a)(t)),t.initData=t.initData.bind(Object(m.a)(t)),t.fetchingData=t.fetchingData.bind(Object(m.a)(t)),t.postingData=t.postingData.bind(Object(m.a)(t)),t.selectLang=t.selectLang.bind(Object(m.a)(t)),t}return Object(h.a)(a,e),Object(r.a)(a,[{key:"fetchingData",value:function(){var e=this;fetch("/tma_cms_apps/api/v1/microsite_manager/json/"+window.siteID.siteID+"/faq/",{credentials:"same-origin",method:"GET"}).then(function(e){return e.json()}).then(function(a){var t=a;e.setState({data:g.a.fromJS(t),loading:!1,dataOld:g.a.fromJS(t)})})}},{key:"postingData",value:function(){var e=this;fetch("/tma_cms_apps/api/v1/microsite_manager/json/"+window.siteID.siteID+"/faq/",{credentials:"same-origin",method:"PUT",body:JSON.stringify(this.state.data.toJS()),headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":window.csrf}}).then(function(e){return e.json()}).then(function(a){e.fetchingData()})}},{key:"selectLang",value:function(e){this.setState({lang:e.target.value,selectedTopic:0})}},{key:"handleChangeTabTopic",value:function(e,a){this.setState({selectedTopic:a})}},{key:"addField",value:function(e,a,t){var n=this;"topic"===e&&this.setState(function(e){return{data:e.data.updateIn([n.state.lang],function(e){return e.push(g.a.fromJS({content:[],icon:"",idTopic:"",nameTopic:"TopicName"}))})}}),"subTopic"===e&&this.setState(function(e){return{data:e.data.updateIn([n.state.lang,a,"content"],function(e){return e.push(g.a.fromJS({nameSubTopic:"SubTopicName",content:[]}))})}}),"question"===e&&this.setState(function(e){return{data:e.data.updateIn([n.state.lang,a,"content",t,"content"],function(e){return e.push(g.a.fromJS({namequestion:"Question",question:"Question",response:""}))})}})}},{key:"removeField",value:function(e,a,t,n){var i=this;"topic"===e&&(this.state.selectedTopic>this.state.data.toJS()[this.state.lang].length-2?this.setState(function(e){var t=e.data;return{selectedTopic:a>0?a-1:0,data:t.deleteIn([i.state.lang,a])}}):this.setState(function(e){return{data:e.data.deleteIn([i.state.lang,a])}})),"subTopic"===e&&this.setState(function(e){return{data:e.data.deleteIn([i.state.lang,a,"content",t])}}),"question"===e&&this.setState(function(e){return{data:e.data.deleteIn([i.state.lang,a,"content",t,"content",n])}})}},{key:"handleChange",value:function(e,a){var t=this;"topic"===a[1]?"name"===a[2]?this.setState(function(n){return{data:n.data.updateIn([t.state.lang,a[0],"nameTopic"],function(a){return e})}}):"icon"===a[2]&&this.setState(function(n){return{data:n.data.updateIn([t.state.lang,a[0],"icon"],function(a){return e})}}):"subtopic"===a[1]?this.setState(function(n){return{data:n.data.updateIn([t.state.lang,a[0],"content",a[2],"nameSubTopic"],function(a){return e})}}):"question"===a[2]?this.setState(function(n){return{data:n.data.updateIn([t.state.lang,a[0],"content",a[1],"content",a[3],"question"],function(a){return e})}}):"response"===a[2]&&this.setState(function(n){return{data:n.data.updateIn([t.state.lang,a[0],"content",a[1],"content",a[3],"response"],function(a){return e})}})}},{key:"detecteChange",value:function(e){this.setState({change:e})}},{key:"handleSubmit",value:function(e){this.postingData()}},{key:"handleCancel",value:function(){this.fetchingData()}},{key:"componentWillMount",value:function(){0===this.state.data.length?this.fetchingData():alert("Ereur lors de la r\xe9cup\xe9ration des donn\xe9es, veuillez contacter un administrateur !")}},{key:"componentDidUpdate",value:function(){this.state.data.equals(this.state.dataOld)?this.state.change&&this.detecteChange(!1):this.state.change||this.detecteChange(!0)}},{key:"initData",value:function(){var e=this;this.setState(function(a){return{data:a.data.updateIn([e.state.lang],function(e){return e.push(g.a.fromJS({content:[],icon:"",idTopic:"",nameTopic:"TopicName"}))})}})}},{key:"render",value:function(){var e,a=this;return i.a.createElement("div",{className:"wrapperFAQ"},i.a.createElement("h1",{id:"mainTitle"},"Administration FAQ ",i.a.createElement("a",{href:"/"},"Manage Images")),this.state.loading?i.a.createElement("center",null,i.a.createElement(H.a,null)):0===this.state.data.toJS()[this.state.lang].length?i.a.createElement("div",null,i.a.createElement(S,{selectLang:this.selectLang,lang:this.state.lang}),i.a.createElement("div",{className:"noTopic"},i.a.createElement("p",null,"Vous n'avez aucun topic"),i.a.createElement(p.a,{id:"initTopicButton",color:"primary",variant:"contained",onClick:function(){a.initData()}},"Cr\xe9er un topic")),i.a.createElement("div",{className:"buttonWrapper",style:{flexDirection:"row"}},!0===this.state.change&&i.a.createElement("div",null,i.a.createElement(p.a,{className:"submitJson buttonStylised",style:{color:"#fff",margin:"0!important"},color:"primary",size:"small",variant:"contained",onClick:function(e){a.handleSubmit(e)}},"Valider"),i.a.createElement("div",{id:"cancel"},i.a.createElement(p.a,(e={className:"buttonStylised"},Object(o.a)(e,"className","reinitJson"),Object(o.a)(e,"style",{color:"#fff"}),Object(o.a)(e,"color","secondary"),Object(o.a)(e,"size","small"),Object(o.a)(e,"variant","contained"),Object(o.a)(e,"onClick",function(e){a.handleCancel(e)}),e),"Annuler")),i.a.createElement("p",{className:"buttonStylised warningChange"},"Des Changements sont en cours")))):i.a.createElement("div",{id:"mainWrapper"},i.a.createElement(S,{selectLang:this.selectLang,lang:this.state.lang}),i.a.createElement(T,{topics:this.state.data.toJS()[this.state.lang],selectedTopic:this.state.selectedTopic,handleChangeTabTopic:this.handleChangeTabTopic,addField:this.addField}),i.a.createElement(U,{change:this.state.change,handleSubmit:this.handleSubmit,handleCancel:this.handleCancel,topics:this.state.data.toJS()[this.state.lang],selectedTopic:this.state.selectedTopic,removeField:this.removeField,handleChangeTabTopic:this.handleChangeTabTopic,handleChange:this.handleChange,addField:this.addField,lang:this.state.lang},i.a.createElement(G,{handleChange:this.handleChange,selectedTopic:this.state.selectedTopic,addField:this.addField,removeField:this.removeField,lang:this.state.lang},i.a.createElement(X,{handleChange:this.handleChange,addField:this.addField,removeField:this.removeField,lang:this.state.lang})))))}}]),a}(i.a.Component),Y=t(198),Z=t(84),$=t(192),ee=t(191),ae=Object(Z.a)({palette:{primary:{main:"#5cb7d8"},secondary:ee.a},background:"#5cb7d8"});c.a.render(i.a.createElement($.a,{theme:ae},i.a.createElement(Y.a,null),i.a.createElement(K,null)),document.getElementById("root"))},92:function(e,a,t){e.exports=t(136)},97:function(e,a,t){}},[[92,1,2]]]);
//# sourceMappingURL=main.f4c3626d.chunk.js.map