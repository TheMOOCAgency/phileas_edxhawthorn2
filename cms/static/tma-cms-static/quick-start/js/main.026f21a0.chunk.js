(this["webpackJsonpphileas-quickstart"]=this["webpackJsonpphileas-quickstart"]||[]).push([[0],{392:function(e,t,a){e.exports=a(726)},586:function(e,t){Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),a=t.length,n=new Array(a);a--;)n[a]=[t[a],e[t[a]]];return n}),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String("undefined"!==typeof t?t:" "),this.length>=e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),a=t.length>>>0;if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],r=0;r<a;){var l=t[r];if(e.call(n,l,r,t))return l;r++}},configurable:!0,writable:!0});Object.values=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),a=t.length>>>0;if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],r=0;r<a;){var l=t[r];if(e.call(n,l,r,t))return r;r++}return-1},configurable:!0,writable:!0})},591:function(e,t,a){},592:function(e,t,a){},626:function(e,t,a){},726:function(e,t,a){"use strict";a.r(t);a(393),a(402),a(586);var n=a(0),r=a.n(n),l=a(18),o=a.n(l),i=(a(591),a(592),a(20)),s=a(27),c=a(28),u=a(30),d=a(29),m=a(734),p=Object(n.createContext)(),f=p.Provider,g=p.Consumer,h=function(e){return function(t){return r.a.createElement(g,null,(function(a){return r.a.createElement(e,Object.assign({},a,t))}))}},E=a(6),v=a(773),b=a(794),w=a(775),C=function(e){return{IntroStepWrapper:{height:"calc(100vh - 200px)",display:"flex",justifyContent:"center",flexDirection:"column"},stepTitle:{textAlign:"center"},stepHelper:{textAlign:"center"},buttonWrapper:{textAlign:"center",padding:10},createNewBtn:{backgroundColor:window.props.colors.secondColor},createPageWrapper:{padding:"0px 50px 20px 50px"},courseListWrapper:{maxWidth:"800px",margin:"0 auto"},courseElementWrapper:{margin:"20px 0px",borderRadius:10},courseElementtitle:{color:e.palette.primary.main,textTransform:"uppercase"},courseElementInfo:{padding:30},flexCenter:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},choseBtn:{borderTopRightRadius:10,borderBottomRightRadius:10,borderBottomLeftRadius:0,borderTopLeftRadius:0,height:"100%",position:"relative",right:"-7px"},dialogButtons:{color:"white!important","&:hover":{color:e.palette.primary.main+"!important"}},bandeau:{backgroundColor:e.palette.primary.main,padding:"30px 50px",color:"white"},bandeauTitle:{fontSize:"1.5rem",margin:0},createCourseWrapper:{padding:20,backgroundColor:"white"},cancelButton:{backgroundColor:"darkgray!important",color:"black",marginLeft:10},disabledBtn:{backgroundColor:"lightgray!important"},backButton:{marginLeft:10},mediumWrapper:{maxWidth:800},smallWrapper:{maxWidth:400},fieldTitle:{color:e.palette.primary.main},fieldWrapper:{padding:"20px 0px"},selectField:{minWidth:225},textEditorWrapper:{marginTop:10,minWidth:800},sliderWrapper:{padding:20},createButtonsWrapper:{padding:20,display:"flex",justifyContent:"space-between"},courseSummaryTitle:{fontWeight:"bold"},programSummaryTitle:{fontWeight:"bold"},loadingPage:{backgroundColor:"white",height:"calc(100vh - 269px)",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},inputLabel:{marginLeft:10},timeInput:{fontSize:"1rem",textAlign:"right",maxWidth:50,boxShadow:"none",borderRadius:5,padding:5},sideBarTitleWrapper:{padding:25},resetWrapper:{textAlign:"right"},buttonReset:{border:"1px solid lightgray",borderRadius:25,padding:"5px 15px",backgroundColor:"white",fontWeight:"bold",cursor:"pointer"},sideBarTitle:{textAlign:"left",fontWeight:"bold",fontSize:"1rem"},headerWrapper:{marginBottom:25},tabWrapper:{padding:"0px 40px",backgroundColor:"white"},searchWrapper:{padding:"0px 40px"},resultWrapper:{padding:"10px 0px"},resultCard:{borderRadius:15},resultTitle:{color:e.palette.primary.main,margin:0,fontWeight:"initial",textTransform:"uppercase"},resultCoursesBold:{color:e.palette.primary.main,fontWeight:"initial",fontSize:"16px"},resultCoursesLight:{color:"black",fontWeight:"initial",fontSize:"14px"},actionWrapper:{padding:10,textAlign:"center"},actionBase:{color:"white",fontWeight:"bold",cursor:"pointer"},actionFirst:{borderTopRightRadius:15},actionLast:{borderBottomRightRadius:15},actionLight:{backgroundColor:"#00A1E9"},actionDark:{backgroundColor:"#0B1A4C"},actionLink:{textDecoration:"none",color:"white",fontWeight:"bold"},resultInfos:{display:"flex",justifyContent:"center",paddingLeft:25,flexDirection:"column"},tabTitle:{color:"black",textTransform:"Capitalize",fontSize:"1.4rem",fontWeight:"bold"},searchTitle:{color:"black",fontSize:"1rem",fontWeight:"bold"},tabsWrapper:{padding:"20px 50px 0px 50px",backgroundColor:"white"},cartouche:{maxWidth:800,textAlign:"center",backgroundColor:window.props.colors.secondColor,borderRadius:60,color:"white",margin:"0 auto",padding:10},cartoucheTitle:{fontWeight:"bold",margin:0},cartoucheInfo:{margin:0},helpers:{paddingBottom:20},subsections:{padding:"10px 10px",display:"flex",alignItems:"center"},sectionsAdd:{display:"flex",alignItems:"center",padding:"10px 5px",cursor:"pointer",fontWeight:"bold"},clear:{cursor:"pointer",marginLeft:10},programCourseList:{margin:"20px 0"}}};var y=Object(E.a)(C)((function(e){var t=e.classes;return r.a.createElement(p.Consumer,null,(function(e){var a=e.changePage,n=e.page;return r.a.createElement(v.a,{position:"static",className:t.tabWrapper},r.a.createElement(b.a,{value:n,onChange:a,className:t.tabsWrapper},r.a.createElement(w.a,{className:t.tabTitle,label:"Courses"}),r.a.createElement(w.a,{className:t.tabTitle,label:"Vodeclic"}),r.a.createElement(w.a,{className:t.tabTitle,label:"Programs"})))}))})),k=a(776),j=a(47),O=Object(E.a)((function(e){return{appTitle:{textAlign:"left",textTransform:"uppercase",margin:0,display:"inline",fontSize:"1.3rem"},appTitleWrapper:{backgroundColor:"white",padding:"30px 50px",display:"flex",alignItems:"center",justifyContent:"space-between"},quickStartWrapper:{display:"inline"},"mr-60":{marginRight:"60px"},"@global":{header:{boxShadow:"none!important"},a:{textDecoration:"none",color:"initial"}}}}))(function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.appTitleWrapper},r.a.createElement("h1",{className:e.appTitle},r.a.createElement(j.b,{to:"/"},"Home")),r.a.createElement("div",{className:e.quickStartWrapper},r.a.createElement(j.b,{to:"/create-program"},r.a.createElement(k.a,{className:e["mr-60"]},"New program")),r.a.createElement(j.b,{to:"/select-mode"},r.a.createElement(k.a,null,"Quick start"))))}}]),a}(n.Component));var x=Object(E.a)(C)((function(e){var t=e.classes;return r.a.createElement("div",{className:t.headerWrapper},r.a.createElement(O,null),r.a.createElement(y,null))})),F=a(781),_=a(379),N=a(777),S=a(727),T=a(778),P=a(797),D=window.props.translations,W=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.filter,a=e.selectOption,n=this.props.selectedFilters?this.props.selectedFilters[t.name]:void 0;return r.a.createElement("div",null,r.a.createElement(N.a,{component:"fieldset"},r.a.createElement(S.a,null,t.options.map((function(e,l){return r.a.createElement(T.a,{key:l,control:r.a.createElement(P.a,{checked:!(!n||!n.includes(e)),value:e,id:e,onClick:function(n){return a(n,t.name,e)}}),label:D[t.name]?D[t.name][e]:e,style:{marginTop:0,marginBottom:0}})})))))}}]),a}(n.Component),A=h(Object(E.a)((function(e){return{container:{paddingTop:35}}}))(W)),B=a(800),I=a(779),L=a(780),R=window.props&&window.props.translations,M=Object(E.a)({root:{textTransform:"capitalize",border:"0px",borderTop:"1px solid lightgray",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(B.a),z=Object(E.a)({root:{backgroundColor:"white",borderBottom:"0px",marginBottom:-1,paddingRight:0,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:"12px 0"}},expanded:{}})(I.a),U=Object(E.a)((function(e){return{root:{padding:e.spacing(2)}}}))(L.a),H=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={open:0==e.props.rank},e.buildFilterOptions=function(e){if("checkbox"===e.type)return r.a.createElement(A,{filter:e})},e.toggleOpen=function(){e.setState((function(e){return{open:!e.open}}))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.filter,a=e.classes,n=e.rank,l=this.state.open;return r.a.createElement(M,{defaultExpanded:0===n},r.a.createElement(z,{onClick:this.toggleOpen},r.a.createElement(F.a,{container:!0},r.a.createElement(F.a,{item:!0,xs:10},r.a.createElement("h5",{className:a.filterTitle},R[t.name+"_title"]||t.name)),r.a.createElement(F.a,{item:!0,xs:2},r.a.createElement("span",{className:a.closeBtn},l?"-":"+")))),r.a.createElement(U,null,"\xa0",this.buildFilterOptions(t)))}}]),a}(n.Component),V=Object(E.a)((function(e){return{filterTitle:{fontWeight:"bold",color:"lightgray",textTransform:"uppercase",fontSize:"1rem",margin:0},closeBtn:{backgroundColor:e.palette.primary.main,color:"white",padding:"0px 5px",borderRadius:5,display:"inline-block",minWidth:20,textAlign:"center"}}}))(H),q=window.props&&window.props.homeFilters,J=window.props&&window.props.translations;var Y=Object(E.a)(C)((function(e){var t=e.classes;return r.a.createElement(p.Consumer,null,(function(e){e.filters;var a=e.resetFilters;return r.a.createElement(_.a,{className:t.sideBarWrapper},r.a.createElement("div",{className:t.sideBarTitleWrapper},r.a.createElement("div",{className:t.resetWrapper},r.a.createElement("button",{className:t.buttonReset,onClick:function(){return a()}},J.reset||"Reset")),r.a.createElement("p",{className:t.sideBarTitle},J.addFilter||"Add Filter"),r.a.createElement("p",null,J.selectSearchFilters||"Select filters you want for your search")),r.a.createElement("div",null,q.map((function(e,t){return r.a.createElement(V,{key:t,rank:t,filter:window.props.homeFiltersDetail.find((function(t){return t.name===e}))})}))))}))})),$=a(118),G=a(252),X=a(129),K=a.n(X),Q=window.props&&window.props.translations,Z=function(e){return Array.isArray(e)?e.join("-separator-").toLowerCase().split("-separator-"):null!=e?e.toLowerCase():e},ee=Object(E.a)(C)((function(e){var t=e.title,a=e.resultList,n=e.classes,l=e.page;return r.a.createElement("div",{className:n.searchWrapper},r.a.createElement(G.a,{component:"div",className:n.searchTitle},t),void 0!==a&&a.map((function(e,t){return r.a.createElement(oe,{key:t,course:e,buttons:"vodeclic"===e.type&&ne||"phileas"===e.type&&ae||!e.type&&re})})),"base"!==l&&void 0!==a&&0===a.length&&r.a.createElement("p",null,"No results"))})),te=function(e,t,a){var n=[a.actionWrapper,a.actionBase];return 0===e&&n.push(a.actionFirst),e+1===t&&n.push(a.actionLast),e%2===0?n.push(a.actionLight):n.push(a.actionDark),n},ae=["email","statistics","rerun","configure","contribute","preview"],ne=[].concat(ae).filter((function(e){return"rerun"!==e})),re=["email","statistics",""],le=["preview"],oe=Object(E.a)(C)((function(e){var t=e.course,a=e.classes,l=e.buttons,o=Object(n.useState)(!1),i=Object($.a)(o,2),s=i[0],c=i[1],u=function(){return{credentials:"same-origin",method:"POST",headers:{"X-CSRFToken":window.props.csrfToken}}},d=function e(t,a){var n=u(),r=setInterval((function(){fetch(window.props.lmsBase+"/courses/"+t+"/instructor/api/list_report_downloads",n).then((function(e){return e.json()})).then((function(n){n.downloads.length?(console.log(n.downloads[0]),m(window.props.lmsBase+n.downloads[0],a+"report"),clearInterval(r)):e(t,a)}))}),2e3)},m=function(e,t){var a=document.createElement("a");a.download=t,a.href=e,a.click(),c(!1)};return r.a.createElement("div",{className:a.resultWrapper},r.a.createElement(_.a,{className:a.resultCard},r.a.createElement(F.a,{container:!0},r.a.createElement(F.a,{item:!0,xs:9,className:a.resultInfos},r.a.createElement("h2",{className:a.resultTitle},t.type?t.course_name:t.program_name),r.a.createElement("div",{style:{textTransform:"capitalize"}},t.type&&t.org),!t.type&&r.a.createElement("div",{className:a.programCourseList},JSON.parse(t.program_courses).map((function(e){return r.a.createElement("div",{key:e.course_id,className:a.resultCoursesBold},e.course_name,":"," ",r.a.createElement("span",{className:a.resultCoursesLight},e.course_id))})))),r.a.createElement(F.a,{item:!0,xs:3},l.map((function(e,n){return r.a.createElement("div",{key:n,style:{height:"".concat(100/l.length,"%"),display:"flex",alignItems:"center",justifyContent:"center"},className:te(n,l.length,a).join(" ")},t.type||!t.type&&0===n?r.a.createElement("a",{onClick:function(){return console.log(t)},style:{color:"white"},href:t[e+"_url"],target:le.includes(e)?"_blank":""},r.a.createElement("span",{style:{textTransform:"capitalize"}},Q[e]||e)):t.type||1!==n?r.a.createElement("div",null):s?r.a.createElement(K.a,{type:"Puff",color:"white",height:25,width:25}):r.a.createElement("div",{onClick:function(){return function(e){c(!0);var t=JSON.parse(e.program_courses)[0].course_id,a=e.program_name;fetch(window.props.lmsBase+"/courses/"+t+"/instructor/api/problem_grade_report",u()).then((function(e){return e.json()})).then((function(){return d(t,a)}))}(t)}},r.a.createElement("span",{style:{textTransform:"capitalize"}},Q[e]||e)))}))))))})),ie=h(function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).respectFilters=function(e,t){var a=[];return Object.entries(t).forEach((function(t){var n=!1,r=t[0],l=Z(t[1]),o=Z(e[r]);l.includes("all")?n=!0:Array.isArray(o)?l.every((function(e){return o.includes(e)}))&&(n=!0):l.includes(o)&&(n=!0),window.props.orgs.includes(e.org)||(n=!1),a.push(n)})),!a.includes(!1)},e.filterResults=function(t,a,n,r){return 0===a?t.filter((function(t){return"phileas"===t.type&&e.respectFilters(t,n)})):1===a?t.filter((function(t){return"vodeclic"===t.type&&e.respectFilters(t,n)})):2===a?r:[]},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.page,a=e.selectedFilters,n=this.filterResults(window.props.courses,t,a,window.props.programs);return r.a.createElement("div",null,0===Object.entries(a).length&&r.a.createElement(ee,{page:"base",title:"Choose filters and start research to find all the courses"}),Object.entries(a).length>0&&0===t&&r.a.createElement(ee,{title:"Courses results",resultList:n,page:0}),Object.entries(a).length>0&&1===t&&r.a.createElement(ee,{title:"Vodeclic results",resultList:n,page:1}),Object.entries(a).length>0&&2===t&&r.a.createElement(ee,{title:"Programs results",resultList:n,page:2}))}}]),a}(n.Component)),se=function(){var e={};return window.props.homeFiltersDetail.filter((function(e){return e.checked&&e.checked.length>0})).forEach((function(t){return e[t.name]=t.checked})),e},ce=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={page:0,selectedFilters:se(),filters:window.props.filters,translations:window.props.translations,colors:window.props.colors},e.getContext=function(){return Object(i.a)(Object(i.a)({},e.state),{},{changePage:e.changePage,selectOption:e.selectOption,resetFilters:e.resetFilters})},e.changePage=function(t,a){e.setState({page:a})},e.resetFilters=function(){e.setState({selectedFilters:[]})},e.selectOption=function(t,a,n){t.stopPropagation();var r=e.state.selectedFilters;r&&r[a]?r[a].includes(n)?(r[a]=r[a].filter((function(e){return e!==n})),0===r[a].length&&delete r[a]):r[a].push(n):r[a]=[n],e.setState({selectedFilters:r})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(f,{value:this.getContext()},r.a.createElement(x,null),r.a.createElement(F.a,{container:!0,className:e.container},2!==this.state.page&&r.a.createElement(F.a,{item:!0,md:3,xs:12},r.a.createElement(Y,null)),r.a.createElement(F.a,{item:!0,md:2===this.state.page?12:9,xs:12},r.a.createElement(ie,{page:this.state.page})))))}}]),a}(n.Component),ue=Object(m.a)((function(e){return{}}))(ce),de=a(72),me=a.n(de),pe=a(121),fe=a(40),ge=a(19),he=a(795),Ee=a(787),ve=a(377),be=a(205),we=a(799),Ce=a(793),ye=a(788),ke=a(133),je=a.n(ke),Oe=a(130),xe=a(136),Fe=a.n(xe),_e=a(135),Ne=a.n(_e);a(626),Object(E.a)(C)((function(e){var t=e.field,a=e.translations,n=e.classes,l=e.addCourseDetails,o=e.value;e.filetype,e.limit,e.showPreview;return r.a.createElement("div",{className:n.mediumWrapper+" "+n.fieldWrapper},!t.hideTitle&&r.a.createElement("h3",{className:n.fieldTitle},a.stepFields[t.name+"_title"]),r.a.createElement("p",null,a.stepFields[t.name+"_helper"]),r.a.createElement("div",null,r.a.createElement("div",{id:"dropzone"},r.a.createElement(Oe.a,{onChange:function(e){return a=e,void l({name:t.name,value:a});var a},filesLimit:1,acceptedFiles:["image/*"],dropzoneText:a.dragAndDropInfo,showAlerts:!1,showPreviewsInDropzone:!1,style:{fontSize:14}})),r.a.createElement("div",null,o&&o[0]&&r.a.createElement("img",{style:{maxWidth:"300px",paddingTop:20},src:URL.createObjectURL(o[0]),alt:"course illustration"}))))})),Object(E.a)(C)((function(e){var t=e.field,a=e.translations,n=e.classes,l=e.addCourseDetails,o=e.value,i=function(e,a){l("hours"===e?{name:t.name,value:[a,o[1]]}:{name:t.name,value:[o[0],a]})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:[n.fieldWrapper,n.smallWrapper].join(" ")},!t.hideTitle&&r.a.createElement("h3",{className:n.fieldTitle},a.stepFields[t.name+"_title"]),r.a.createElement("p",null,a.stepFields[t.name+"_helper"]),r.a.createElement(F.a,{container:!0},r.a.createElement(F.a,{item:!0,xs:6},r.a.createElement(je.a,{value:o[0],onChange:function(e){return i("hours",e.target.value)},className:n.timeInput}),r.a.createElement("span",{className:n.inputLabel},a.hours)),r.a.createElement(F.a,{item:!0,xs:6},r.a.createElement(je.a,{value:o[1],onChange:function(e){return i("minutes",e.target.value)},className:n.timeInput}),r.a.createElement("span",{className:n.inputLabel},a.minutes)))))}));function Se(e){var t=e.type,a=e.translations,n=e.value,l=e.addCourseDetails;function o(e){l({value:e?e.toISOString():e,name:t})}return r.a.createElement(be.c,{utils:ve.a},r.a.createElement(F.a,{container:!0,justify:"space-around"},r.a.createElement(be.a,{margin:"normal",id:"mui-pickers-date",label:"start_date"===t?a.startDate_date:a.endDate_date,value:n,onChange:o,KeyboardButtonProps:{"aria-label":"change date"},cancelLabel:a.cancel,okLabel:a.confirm}),r.a.createElement(be.b,{margin:"normal",id:"mui-pickers-time",label:"start_date"===t?a.startDate_time:a.endDate_time,value:n,onChange:o,KeyboardButtonProps:{"aria-label":"change time"},cancelLabel:a.cancel,okLabel:a.confirm})))}Object(E.a)(C)((function(e){var t=e.value,a=void 0===t?"":t,n=e.field,l=e.translations,o=e.classes,i=e.addCourseDetails,s=e.fixedField;return r.a.createElement("div",{className:o.fieldWrapper},r.a.createElement("h3",{className:o.fieldTitle},l.stepFields[n.name+"_title"]),r.a.createElement(Ee.a,null,l.stepFields[n.name+"_helper"]),r.a.createElement(N.a,{variant:"outlined",disabled:s},r.a.createElement(Ce.a,{value:a,onChange:function(e){i({value:e.target.value,name:n.name})},inputProps:{name:n.name},className:o.selectField},r.a.createElement(we.a,{value:""},r.a.createElement("em",null)),n.options.map((function(e,t){return r.a.createElement(we.a,{key:t,value:e},l.stepFields[e+"_title"]||e)})))))})),Object(E.a)(C)((function(e){var t=e.value,a=e.field,n=e.translations,l=e.classes,o=e.addCourseDetails;return r.a.createElement("div",{className:l.fieldWrapper},r.a.createElement("h3",{className:l.fieldTitle},n.stepFields[a.name+"_title"]),r.a.createElement(Ee.a,null,n.stepFields[a.name+"_helper"]),r.a.createElement(he.a,{rows:"4",className:l.textEditorWrapper,multiline:!0,variant:"outlined",onChange:function(e){o({value:e.target.value,name:a.name})},value:t}))}));var Te=Object(E.a)({thumb:{height:24,width:24,backgroundColor:"#fff",marginTop:10},track:{backgroundColor:window.props&&window.props.colors.configureColor,height:24,borderRadius:60},trackAfter:{backgroundColor:window.props&&window.props.colors.statisticsColor,opacity:1,borderRadius:60},container:{height:70}})(ye.a),Pe=Object(E.a)(C)((function(e){var t=e.value,a=e.field,n=e.translations,l=e.classes,o=e.addCourseDetails;return r.a.createElement("div",{className:l.fieldWrapper},r.a.createElement("h3",{className:l.fieldTitle},n.stepFields[a.name+"_title"]),r.a.createElement(Ee.a,null,n.stepFields[a.name+"_helper"]),r.a.createElement("p",null,n.fail||"Fail Level"," : 0% - ",Math.round(t),"%"," "),r.a.createElement("p",null,n.pass||"Pass"," : ",Math.round(t),"% - 100%"," "),r.a.createElement(Te,{container:{height:60},value:t,onChange:function(e,t){o({value:Math.round(t),name:a.name})},className:l.sliderWrapper}),r.a.createElement(F.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},function(){for(var e=[],t=0;t<=100;t+=10)e.push(r.a.createElement("span",{key:t},t));return e}()))})),De=(Object(E.a)(C)((function(e){var t=e.classes,a=e.value,n=e.field,l=e.translations,o=e.addCourseDetails,i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,l=Object(ge.a)(a);void 0!==r?l[t].subsections[r]=e:l[t].title=e,o({name:n.name,value:l})},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=Object(ge.a)(a);void 0!==t?r[e].subsections.length>1?r[e].subsections=[].concat(Object(ge.a)(r[e].subsections.splice(0,t)),Object(ge.a)(r[e].subsections.splice(t+1))):r[e].subsections=[]:r=[].concat(Object(ge.a)(r.splice(0,e)),Object(ge.a)(r.splice(e+1))),o({name:n.name,value:r})};return r.a.createElement("div",{className:t.fieldWrapper},r.a.createElement("h3",{className:t.fieldTitle},l.stepFields[n.name+"_title"]),r.a.createElement(Ee.a,{className:t.helpers},l.stepFields[n.name+"_helper"]),r.a.createElement(F.a,{container:!0,direction:"column",justify:"center",alignItems:"flex-start",spacing:2},a.map((function(e,c){return r.a.createElement("div",{key:c},r.a.createElement(F.a,{item:!0},r.a.createElement(he.a,{value:e.title,variant:"outlined",onChange:function(e){return i(e.target.value,c)}}),r.a.createElement(Ne.a,{className:t.clear,onClick:function(){return s(c)}})),e.subsections.map((function(e,a){return r.a.createElement(F.a,{item:!0,key:a,className:t.subsections},r.a.createElement(he.a,{value:e,variant:"outlined",onChange:function(e){return i(e.target.value,c,a)}}),r.a.createElement(Ne.a,{className:t.clear,onClick:function(){return s(c,a)}}))})),r.a.createElement("span",{className:t.sectionsAdd,onClick:function(e){return function(e){var t=Object(ge.a)(a);t[e].subsections.push(l.new_subsection||"New subsection"),o({name:n.name,value:t})}(c)}},r.a.createElement(Fe.a,null)," ",l.addSubsection||"Add Subsection"))})),r.a.createElement("span",{className:t.sectionsAdd,onClick:function(){o({name:n.name,value:[].concat(Object(ge.a)(a),[{title:l.new_section||"New Section",subsections:[l.new_subsection||"New Subsection"]}])})}},r.a.createElement(Fe.a,null)," ",l.addSection||"Add Section")))})),Object(E.a)(C)((function(e){var t=e.classes;return r.a.createElement(p.Consumer,null,(function(e){var a=e.newCourse,n=e.translations;return r.a.createElement("div",{className:t.cartouche},r.a.createElement(F.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(F.a,{item:!0,xs:3},r.a.createElement("p",{className:t.cartoucheTitle},n.stepFields.course_name_title),r.a.createElement("p",{className:t.cartoucheInfo},a.course_name)),r.a.createElement(F.a,{item:!0,xs:3},r.a.createElement("p",{className:t.cartoucheTitle},n.stepFields.org_title),r.a.createElement("p",{className:t.cartoucheInfo},a.org)),r.a.createElement(F.a,{item:!0,xs:3},r.a.createElement("p",{className:t.cartoucheTitle},n.stepFields.course_number_title),r.a.createElement("p",{className:t.cartoucheInfo},a.course_number)),r.a.createElement(F.a,{item:!0,xs:3},r.a.createElement("p",{className:t.cartoucheTitle},n.stepFields.course_session_title),r.a.createElement("p",{className:t.cartoucheInfo},a.course_session))))}))}))),We=a(199),Ae=a.n(We),Be=(a(327),[].concat.apply([],window.props&&window.props.createSteps)),Ie=window.props.lmsBase;var Le=function(e){var t=e.newCourse,a=e.translations,n=e.classes,l=e.editMode;return r.a.createElement("div",null,"create"===l?r.a.createElement("h3",null,a.verifyCourseInfo||"Please verify course info before launching creation"):r.a.createElement("h3",null,a.verifyCourseInfo||"Please verify course info before launching update"),Object.entries(t).filter((function(e){return Be.includes(e[0])})).map((function(e,l){return r.a.createElement("div",{key:l},function(e){var l;if(l=e[1]instanceof Date?r.a.createElement(Ae.a,{locale:"fr"===window.props.currentLanguage?"fr":"en",format:"LLL"},e[1].toString()):"course_grade"===e[0]?t.course_settings.includes("is_course_graded")?r.a.createElement("span",null,e[1],"%"):r.a.createElement("span",null,a.courseNotGraded):"effort"===e[0]?r.a.createElement("span",null," ",e[1][0]," ",a.hours," ",e[1][1]," ",a.minutes," "):["course_image","teacher_image"].includes(e[0])?null!=(Ie+e[1]).match(/\.(jpeg|jpg|gif|png)$/)?r.a.createElement("div",null,r.a.createElement("img",{style:{maxWidth:150},src:Ie+e[1],alt:e[0]})):Array.isArray(e[1])&&e[1].length>0?r.a.createElement("div",null,r.a.createElement("img",{style:{maxWidth:150},src:URL.createObjectURL(e[1][0]),alt:e[0]})):r.a.createElement("span",null,a.noImage):"course_map"===e[0]?e[1]?e[1].map((function(e,t){return r.a.createElement("span",{key:t},r.a.createElement("p",null,e.title),e.subsections.map((function(e,t){return r.a.createElement("p",{key:t},e)})))})):r.a.createElement("span",null,a.no_course_map||"No course map provided"):"course_downloads"===e[0]?r.a.createElement("ul",null,e[1].map((function(e,t){return r.a.createElement("li",{key:t},e.title)}))):"boolean"===typeof e[1]?r.a.createElement("span",null,a[e[1].toString()]):null===e[1]?r.a.createElement("span",null,a.nullValue||"No value provided"):Array.isArray(e[1])?e[1].map((function(e,t){return r.a.createElement("p",{key:t}," ",a.stepFields[e+"_title"]||e," ")})):r.a.createElement("span",null,a.stepFields[e[1]+"_title"]||e[1]))return r.a.createElement("div",null,r.a.createElement("span",{className:n.courseSummaryTitle},a.stepFields[e[0]+"_title"]||e[0]," ",":"," "),l)}(e))})))},Re=a(200),Me=a.n(Re),ze=a(201),Ue=a.n(ze),He=window.props&&window.props.translations;var Ve=Object(m.a)(C)((function(e){var t=e.classes;return r.a.createElement(p.Consumer,null,(function(e){var a=e.newCourseResponse,n=e.editMode,l=e.eraseNewCourse;return r.a.createElement("div",{className:t.loadingPage},a?r.a.createElement(qe,null):r.a.createElement(r.a.Fragment,null,"configure"===n?r.a.createElement("h3",null,He.waitCourseUpdate||"Your course is beeing updated please wait."):r.a.createElement("h3",null,He.waitCourseCreation||"Your course is beeing created please wait."),"configure"===n?r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,He.mayTakeSomeTimeUpdate||"Updating your course may take some time..."),r.a.createElement("div",{onClick:function(){return l()},style:{cursor:"pointer"}},r.a.createElement("h4",null,He.mayTakeSomeTimeLinkUpdate||"Click here to reload the page, your course should appear within the next 10 minutes."))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,He.mayTakeSomeTimeCreate||"Creating your course may take some time..."),r.a.createElement("div",{onClick:function(){return l()},style:{cursor:"pointer"}},r.a.createElement("h4",null,He.mayTakeSomeTimeLinkCreate||"Click here to reload the page, your course should appear within the next 10 minutes."))),r.a.createElement(K.a,{type:"Puff",color:window.props.colors.mainColor,height:"100",width:"100"})))}))})),qe=function(e){return r.a.createElement(p.Consumer,null,(function(e){var t=e.newCourseResponse,a=e.newCourse,n=e.eraseNewCourse,l=e.editMode;return r.a.createElement(r.a.Fragment,null,"error"!==t.status?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(Me.a,{style:{fontSize:90,color:window.props.colors.mainColor}})),"configure"===l?r.a.createElement("h3",null,He.courseHasBeenUpdated||"Your course has been updated"):r.a.createElement("h3",null,He.courseHasBeenCreated||"Your course has been created"),r.a.createElement("h4",null,He.stepFields.course_name_title," : ",a.course_name),r.a.createElement(F.a,{container:!0,spacing:6,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(F.a,{item:!0},r.a.createElement(k.a,{href:t.edit_link,onClick:function(){return n()}},He.seeMyCourse)),r.a.createElement(F.a,{item:!0},r.a.createElement(j.b,{to:"/"},r.a.createElement(k.a,{onClick:function(){return n()}},He.backToHomePage))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(Ue.a,{style:{fontSize:90,color:"red"}})),r.a.createElement("h3",null,He.errorWhileCreatingCourse),r.a.createElement("h4",null,He.courseNotCreated),r.a.createElement(F.a,{container:!0,spacing:6,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(F.a,{item:!0},r.a.createElement(j.b,{to:"/"},r.a.createElement(k.a,{onClick:function(){return n()}},He.backToHomePage))))))}))},Je=window.props&&window.props.translations,Ye=Object(E.a)(C)((function(e){var t=e.value,a=void 0===t?"":t,n=e.field,l=e.classes,o=e.addCourseDetails,i=e.fixedField;return r.a.createElement(N.a,{variant:"outlined",disabled:i},r.a.createElement(Ce.a,{value:a,onChange:function(e){o({value:e.target.value,name:n.name})},inputProps:{name:n.name},className:l.selectField},r.a.createElement(we.a,{value:""},r.a.createElement("em",null)),n.options.map((function(e,t){return r.a.createElement(we.a,{key:t,value:e},Je.stepFields[e+"_title"]||e)}))))})),$e=Object(E.a)(C)(Ye),Ge=Object(E.a)(C)((function(e){var t=e.field,a=e.translations,n=e.classes,l=e.addCourseDetails,o=e.value,i=function(e,a){l("hours"===e?{name:t.name,value:[a,o[1]]}:{name:t.name,value:[o[0],a]})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:[n.fieldWrapper,n.smallWrapper].join(" ")},!t.hideTitle&&r.a.createElement("h3",{className:n.fieldTitle},a.stepFields[t.name+"_title"]),r.a.createElement("p",null,a.stepFields[t.name+"_helper"]),r.a.createElement(F.a,{container:!0},r.a.createElement(F.a,{item:!0,xs:6},r.a.createElement(je.a,{value:o[0],onChange:function(e){return i("hours",e.target.value)},className:n.timeInput}),r.a.createElement("span",{className:n.inputLabel},a.hours)),r.a.createElement(F.a,{item:!0,xs:6},r.a.createElement(je.a,{value:o[1],onChange:function(e){return i("minutes",e.target.value)},className:n.timeInput}),r.a.createElement("span",{className:n.inputLabel},a.minutes)))))})),Xe=Object(E.a)(C)(Ge),Ke=window.props&&window.props.translations,Qe=Object(E.a)(C)((function(e){var t=e.classes,a=e.value,n=e.field,l=e.addCourseDetails,o=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=Object(ge.a)(a);void 0!==r?o[t].subsections[r]=e:o[t].title=e,l({name:n.name,value:o})},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=Object(ge.a)(a);void 0!==t?r[e].subsections.length>1?r[e].subsections=[].concat(Object(ge.a)(r[e].subsections.splice(0,t)),Object(ge.a)(r[e].subsections.splice(t+1))):r[e].subsections=[]:r=[].concat(Object(ge.a)(r.splice(0,e)),Object(ge.a)(r.splice(e+1))),l({name:n.name,value:r})};return r.a.createElement("div",null,console.log(a),a.map((function(e,s){return r.a.createElement("div",{key:s},r.a.createElement("div",null,r.a.createElement(he.a,{value:e.title,variant:"outlined",onChange:function(e){return o(e.target.value,s)}}),r.a.createElement(Ne.a,{className:t.clear,onClick:function(){return i(s)}})),e.subsections.map((function(e,a){return r.a.createElement("div",{key:a,className:t.subsections},r.a.createElement(he.a,{value:e,variant:"outlined",onChange:function(e){return o(e.target.value,s,a)}}),r.a.createElement(Ne.a,{className:t.clear,onClick:function(){return i(s,a)}}))})),r.a.createElement("span",{className:t.sectionsAdd,onClick:function(e){return function(e){var t=Object(ge.a)(a);t[e].subsections.push(Ke.new_subsection||"New subsection"),l({name:n.name,value:t})}(s)}},r.a.createElement(Fe.a,null)," ",Ke.addSubsection||"Add Subsection"))})),r.a.createElement("span",{className:t.sectionsAdd,onClick:function(){l({name:n.name,value:[].concat(Object(ge.a)(a),[{title:Ke.new_section||"New Section",subsections:[Ke.new_subsection||"New Subsection"]}])})}},r.a.createElement(Fe.a,null)," ",Ke.addSection||"Add Section"))})),Ze=Object(E.a)(C)(Qe),et=window.props&&window.props.translations,tt=Object(E.a)(C)((function(e){var t=e.field,a=e.defaultValue,n=e.handleFieldChange,l=e.fixedField,o=(e.classes,e.newCourse),i=["course_session","course_number"].includes(t.name)&&!o.validCourseId;return r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{defaultValue:et.stepFields[t.name+"_default_value"],margin:"normal",value:a,InputProps:l?{readOnly:!0}:{},onChange:function(e){return n(t.name,e.target.value)},variant:"outlined",error:i}),i&&r.a.createElement(Ee.a,{error:!0,id:"component-error-text"},et.invalidCourseId," "))})),at=a(796),nt=a(789),rt=window.props&&window.props.translations,lt=Object(E.a)(C)((function(e){var t,a=e.field,n=(e.classes,e.addCourseDetails),l=e.value,o=e.fixedField;return r.a.createElement(N.a,{component:"fieldset"},r.a.createElement(nt.a,{"aria-label":a.name,name:a.name,value:l||a.options[0],onChange:(t=a.name,function(e){n({name:t,value:e.target.value})})},a.options.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(T.a,{value:e,control:r.a.createElement(at.a,null),label:rt.stepFields[e+"_title"]||e,disabled:o}),r.a.createElement(Ee.a,null,rt.stepFields[e+"_helper"]))}))))})),ot=window.props&&window.props.translations,it=Object(E.a)(C)((function(e){var t=e.field,a=(e.classes,e.addCourseDetails),n=e.value;return r.a.createElement(N.a,{component:"fieldset"},r.a.createElement(S.a,null,t.options.map((function(e,l){return r.a.createElement("div",{key:l},r.a.createElement(T.a,{control:r.a.createElement(P.a,{value:e,onChange:function(e){e.target.checked?a({name:t.name,value:n[t.name]?[].concat(Object(ge.a)(n[t.name]),[e.target.value]):[e.target.value]}):(console.log("not checkds"),a({name:t.name,value:Object(ge.a)(n[t.name]).filter((function(t){return t!==e.target.value}))}))},checked:n[t.name]&&n[t.name].includes(e)}),label:ot.stepFields[e+"_title"]||e}),r.a.createElement(Ee.a,null,ot.stepFields[e+"_helper"]))}))))})),st=Object(E.a)(C)((function(e){var t=e.field,a=e.value,n=e.addCourseDetails,l=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{rows:"4",className:l.textEditorWrapper,style:{minWidth:"100%"},multiline:!0,variant:"outlined",onChange:function(e){n({value:e.target.value,name:t.name})},value:a}))})),ct=window.props&&window.props.translations,ut="https://edx.devstack.lms:18000"===window.props.lmsBase?"http://localhost:18010":window.props.lmsBase;function dt(e){return null!=e.match(/\.(jpeg|jpg|gif|png)$/)}var mt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={uploadsNumber:0},e.handleFieldChange=function(t){e.props.addCourseDetails({name:e.props.field.name,value:t})},e.eraseFile=function(t){"configure"===t&&dt(ut+e.props.value)&&e.props.deleteAsset(e.props.value),e.props.addCourseDetails({name:e.props.field.name,value:[]}),e.setState((function(e){return{uploadsNumber:e.uploadsNumber+1}}))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.value,n=t.type,l=t.editMode;return r.a.createElement("div",null,"configure"===l&&dt(ut+a)?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{style:{fontStyle:"italic"}},ct.currentImage||"Current image uploaded"),r.a.createElement("img",{style:{maxWidth:"300px",paddingTop:20},src:ut+a,alt:"course illustration"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"dropzone"},r.a.createElement(Oe.a,{onChange:function(t){return e.handleFieldChange(t)},filesLimit:"image"===n?1:3,acceptedFiles:"image"===n?["image/*"]:["image/*","video/*","application/*"],dropzoneText:ct.dragAndDropInfo,showAlerts:!1,showPreviewsInDropzone:"image"!==n,key:this.state.uploadsNumber})),r.a.createElement("div",null,Array.isArray(a)&&a.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{style:{maxWidth:"300px",paddingTop:20},src:URL.createObjectURL(a[0]),alt:"course illustration"})))),(Array.isArray(a)&&a.length>0||dt(ut+a))&&r.a.createElement("div",{style:{maxWidth:"300px",textAlign:"center"}},r.a.createElement(k.a,{onClick:function(){return e.eraseFile(l)}},ct.deleteImage||"Delete Image")))}}]),a}(n.Component),pt=Object(E.a)(C)(mt),ft=a(373),gt=a(115),ht=(a(725),a(374)),Et=a.n(ht),vt=a(375),bt=a.n(vt),wt=window.props&&window.props.translations,Ct=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).onEditorStateChange=function(e){n.setState({editorState:e,showSave:!0})},n.saveChanges=function(){n.props.addCourseDetails({name:n.props.field.name,value:Et()(Object(gt.convertToRaw)(n.state.editorState.getCurrentContent()))}),n.setState({showSave:!1}),console.log("has saved")};var r=n.props.value,l=bt()(r);if(l){var o=gt.ContentState.createFromBlockArray(l.contentBlocks),i=gt.EditorState.createWithContent(o);n.state={editorState:i,showSave:!1}}return n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.state.editorState;return r.a.createElement("div",null,r.a.createElement(ft.Editor,{editorState:t,wrapperClassName:"demo-wrapper",editorClassName:"demo-editor",onEditorStateChange:this.onEditorStateChange,toolbar:{options:["inline","blockType","fontSize","list","textAlign","link"]}}),this.state.showSave&&r.a.createElement(k.a,{color:"primary",onClick:function(){return e.saveChanges()}},wt.saveChanges||"Save Changes"))}}]),a}(n.Component),yt=Object(E.a)(C)((function(e){var t=e.field,a=(e.classes,e.addCourseDetails),l=e.value,o=Object(n.useState)(l),i=Object($.a)(o,2),s=i[0],c=i[1];return r.a.createElement(r.a.Fragment,null,!s&&r.a.createElement(k.a,{onClick:function(){return c("...")}},wt.addGoals||"Add Course Goals"),s&&r.a.createElement(Ct,{addCourseDetails:a,field:t,value:l}))})),kt=a(782),jt=a(798),Ot=a(784),xt=a(783),Ft=a(790);var _t,Nt=function(e){var t=e.open,a=e.title,n=e.subtitle,l=e.cancelText,o=e.confirmText,i=e.setOpen,s=e.eraseDownload;return r.a.createElement(jt.a,{"aria-labelledby":"simple-dialog-title",open:t},r.a.createElement(kt.a,{id:"simple-dialog-title"},a),r.a.createElement(xt.a,null,r.a.createElement(Ft.a,null,n)),r.a.createElement(Ot.a,null,r.a.createElement(k.a,{onClick:function(e){return i(!1)}},l),r.a.createElement(k.a,{onClick:function(e){return s()}},o)))};_t=window.props.lmsBase;var St=window.props&&window.props.translations,Tt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={currentTitle:void 0,currentFile:void 0,errorMessage:void 0,filesUploadedCount:0},e.handleFieldChange=function(t,a){e.setState(Object(fe.a)({},a,t))},e.addFile=function(){void 0===e.state.currentTitle?e.setState({errorMessage:St.missingTitle||"Title is missing"}):void 0===e.state.currentFile?e.setState({errorMessage:St.missingFile||"File is missing"}):(e.setState((function(e){return{currentTitle:void 0,currentFile:void 0,errorMessage:void 0,filesUploadedCount:e.filesUploadedCount+1}})),e.props.addCourseDetails({name:e.props.field.name,value:[].concat(Object(ge.a)(e.props.value),[{title:e.state.currentTitle,file:e.state.currentFile[0]}])}))},e.eraseFile=function(t){e.props.addCourseDetails({name:e.props.field.name,value:[].concat(Object(ge.a)(e.props.value.slice(0,t)),Object(ge.a)(e.props.value.slice(t+1)))})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.value,n=t.editMode,l=t.field,o=t.actualDownloads,i=t.addCourseDetails,s=t.deleteAsset,c=this.handleFieldChange;return r.a.createElement("div",null,r.a.createElement("p",null,St.filteTitle||"File title"),r.a.createElement(he.a,{variant:"outlined",value:this.state.currentTitle||"",onChange:function(e){return c(e.target.value,"currentTitle")}}),r.a.createElement("p",null,St.filteTitle||"File to upload"),r.a.createElement("div",{className:"dropzone"},r.a.createElement(Oe.a,{filesLimit:1,acceptedFiles:["image/*","video/*","application/*"],dropzoneText:St.dragAndDropInfo,showAlerts:!1,showPreviewsInDropzone:!1,showFileNamesInPreview:!1,onChange:function(e){return c(e,"currentFile")},key:this.state.filesUploadedCount}),this.state.currentFile&&r.a.createElement("p",{style:{cursor:"pointer"},onClick:function(t){return e.setState((function(e){return{currentFile:void 0,filesUploadedCount:e.filesUploadedCount+1}}))}},this.state.currentFile[0].name," X")),r.a.createElement(k.a,{style:{marginTop:10},onClick:function(t){return e.addFile()}},St.addFile||"Add File"),r.a.createElement("p",{style:{color:"red",fontStyle:"italic"}},this.state.errorMessage),r.a.createElement("div",null,r.a.createElement("p",null,St.filesUploaded||"Files Uploaded"),a.length>0?r.a.createElement("ul",null,a.map((function(t,a){return r.a.createElement("li",{key:a,onClick:function(t){return e.eraseFile(a)},style:{cursor:"pointer",padding:10}},t.title," X")}))):r.a.createElement("p",{style:{fontStyle:"italic"}},St.noFiles||"No file uploaded yet")),"configure"===n&&o.length>0&&r.a.createElement(Dt,{actualDownloads:o,addCourseDetails:i,field:l,deleteAsset:s}))}}]),a}(n.Component),Pt=Object(E.a)(C)(Tt),Dt=function(e){var t=e.actualDownloads,a=e.addCourseDetails,n=e.field,l=e.deleteAsset,o=r.a.useState(!1),i=Object($.a)(o,2),s=i[0],c=i[1],u=r.a.useState(!1),d=Object($.a)(u,2),m=d[0],p=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,St.actualFilesUploaded||"Previous Files uploaded"),t.map((function(e,t){return r.a.createElement("li",{key:t},e.text," :",r.a.createElement("a",{href:_t+e.link,target:"_blank",rel:"noopener noreferrer"},St.viewFile||"View File"," "),r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(e){c(!0),p(t)}}," ",St.eraseFile||"Erase File"))})),r.a.createElement(Nt,{open:s,title:St.confirmDelete||"Are you sure?",subtitle:St.confirmDeleteHelper||"If you delete this file you won't be able to revert this action.",cancelText:St.cancel||"Cancel",confirmText:St.delete||"Delete",setOpen:c,eraseDownload:function(){a({name:"actual_"+n.name,value:0===m?Object(ge.a)(t.slice(m+1)):[].concat(Object(ge.a)(t.slice(0,m)),Object(ge.a)(t.slice(m+1)))}),c(!1),l(t[m].link)}}))},Wt=window.props&&window.props.translations,At=Object(E.a)(C)((function(e){var t=e.children,a=e.extraclasses,n=e.classes,l=e.field;return r.a.createElement("div",{className:a?n.fieldWrapper+" "+a.join(" "):n.fieldWrapper},!l.hideTitle&&r.a.createElement("h3",{className:n.fieldTitle},Wt.stepFields[l.name+"_title"]),r.a.createElement("p",null,Wt.stepFields[l.name+"_helper"]),r.a.createElement("div",null,t))})),Bt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).createFields=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,o=n.context,i=o.handleFieldChange,s=o.newCourse,c=o.translations,u=o.addCourseDetails,d=n.props.classes;return e.map((function(e,n){switch(e.type){case"text":return r.a.createElement(At,{key:n,field:e},r.a.createElement(tt,{field:e,defaultValue:s[e.name]||"",handleFieldChange:i,fixedField:t.includes(e.name),newCourse:s}));case"radio":return r.a.createElement(At,{key:n,field:e},r.a.createElement(lt,{field:e,addCourseDetails:u,value:s[e.name],fixedField:t.includes(e.name)}));case"checkBox":return r.a.createElement(At,{key:n,field:e},r.a.createElement(it,{field:e,addCourseDetails:u,value:s}));case"imageUpload":return r.a.createElement(At,{key:n,field:e},r.a.createElement(pt,{field:e,addCourseDetails:u,value:s[e.name],type:"image",editMode:a,deleteAsset:l}));case"multipleUploads":return r.a.createElement(At,{key:n,field:e},r.a.createElement(Pt,{field:e,value:s[e.name]||[],addCourseDetails:u,editMode:a,actualDownloads:s["actual_"+e.name]||[],deleteAsset:l}));case"date":return r.a.createElement("div",{key:n,className:d.mediumWrapper+" "+d.fieldWrapper},r.a.createElement("h3",{className:d.fieldTitle},c.stepFields.course_dates_title),r.a.createElement("p",null,c.stepFields.course_dates_title_helper),r.a.createElement(Se,{type:"start_date",addCourseDetails:u,translations:c,value:s.start_date}),r.a.createElement(Se,{type:"end_date",addCourseDetails:u,translations:c,value:s.end_date}));case"select":return r.a.createElement(At,{key:n,field:e},r.a.createElement($e,{field:e,value:s[e.name]||[],addCourseDetails:u,fixedField:t.includes(e.name)}));case"textField":return r.a.createElement(At,{key:n,field:e},r.a.createElement(st,{field:e,addCourseDetails:u,value:s[e.name]}));case"grade":return r.a.createElement(Pe,{key:n,field:e,translations:c,addCourseDetails:u,value:s[e.name]});case"time":return r.a.createElement(Xe,{key:n,field:e,translations:c,addCourseDetails:u,value:s[e.name]||[]});case"jsonEditor":return r.a.createElement(At,{key:n,field:e},r.a.createElement(Ze,{field:e,value:s[e.name],addCourseDetails:u}));case"textEditor":return r.a.createElement(At,{key:n,field:e},r.a.createElement(yt,{field:e,value:s[e.name],addCourseDetails:u}));default:return""}}))},n.validCourseParameters=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!0,a=n.context.newCourse;return e.forEach((function(e){e.required&&!a[e.name]&&(t=!1)})),t};var l={};return window.props.createSteps.forEach((function(e,t){var a=e.map((function(e,t){return window.props.fields.find((function(t){return t.name===e}))}));l["step"+(t+1)]=a})),n.state=l,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.context,t=e.mode,a=e.step,n=e.selectedCourse,l=e.translations,o=e.handleNextClick,i=e.newCourse,s=e.toggleDialog,c=e.handleBackClick,u=e.launchCourseCreation,d=e.checkCourseId,m=e.editMode,p=e.blockedFields,f=e.deleteAsset,g=this.props.classes,h=this.state["step"+a],E=!this.validCourseParameters(h);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:g.bandeau},[1,2,3,4].includes(a)?r.a.createElement(G.a,null,"Step ",a,"/4"):r.a.createElement("h3",{className:g.bandeauTitle},l.stepFields.courseSummary),r.a.createElement("h3",{className:g.bandeauTitle},"create"===m?"Create Course - Mode "+t:"Configure Course")),r.a.createElement("div",{className:g.createCourseWrapper},[2,3,4].includes(a)&&r.a.createElement(De,{translations:l,newCourse:i}),[1,2,3,4,5].includes(a)&&this.createFields(h,n,p,m,f),5===a&&r.a.createElement(Le,{newCourse:i,translations:l,classes:g,editMode:m}),6===a&&r.a.createElement(Ve,null)),[1,2,3,4,5].includes(a)&&r.a.createElement("div",{className:g.createButtonsWrapper},r.a.createElement("span",null,[2,3,4,5].includes(a)&&r.a.createElement(k.a,{onClick:function(){return c()},className:g.backButton},l.back),1===a&&r.a.createElement(k.a,{disabled:E,onClick:function(){return d()},className:E?g.disabledBtn:"",style:{marginLeft:10}},l.next),[2,3,4].includes(a)&&r.a.createElement(k.a,{disabled:E,onClick:function(){return o()},style:{marginLeft:10}},l.next)),5===a&&r.a.createElement(k.a,{disabled:E,onClick:function(e){return u(e)}},"create"===m?l.createCourse||"Create Course":l.upadateCourse||"Update Course"),r.a.createElement(k.a,{className:g.cancelButton,onClick:function(){return s()}},l.cancel)))}}]),a}(n.Component);Bt.contextType=p;var It=Object(E.a)(C)(Bt);var Lt=Object(m.a)(C)((function(e){var t=e.openDialog,a=e.toggleDialog,n=e.dialogTitle,l=e.dialogContent,o=e.dialogValid,i=e.dialogCancel,s=e.dialogAction,c=e.classes;return r.a.createElement("div",null,r.a.createElement(jt.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(kt.a,{id:"alert-dialog-title"},n),r.a.createElement(xt.a,null,r.a.createElement(Ft.a,{id:"alert-dialog-description"},l)),r.a.createElement(Ot.a,null,o&&r.a.createElement(k.a,{onClick:s,color:"primary",className:c.dialogButtons},o),i&&r.a.createElement(k.a,{onClick:a,color:"primary",autoFocus:!0,className:c.dialogButtons},i))))})),Rt="https://edx.devstack.lms:18000"===window.props.lmsBase?"http://localhost:18010":window.props.lmsBase,Mt=window.props&&window.props.courseBasis,zt=window.props&&window.props.translations,Ut=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={translations:window.props.translations,courses:window.props.courses||[],step:1,selectedCourse:void 0,mode:"new-course",newCourse:Mt,cancelCreationPopup:!1,newCourseResponse:void 0,blockedFields:[]},e.setMode=function(t){e.setState((function(e){return{mode:t,step:e.step+1}}))},e.addCourseDetails=function(t){e.setState((function(e){return{newCourse:Object(i.a)(Object(i.a)({},e.newCourse),{},Object(fe.a)({},t.name,t.value))}}))},e.handleNextClick=function(){e.setState((function(e){return{step:e.step+1}}))},e.checkCourseId=Object(pe.a)(me.a.mark((function t(){var a,n,r,l,o,s;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=!1,"configure"!==e.props.editMode){t.next=5;break}a=!0,t.next=15;break;case 5:return n=e.state.newCourse,r=window.props.api.courseidChecking+"course-v1:"+n.org.toString()+"+"+n.course_number.toString()+"+"+n.course_session.toString(),l={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}},t.next=10,fetch(r,l);case 10:return o=t.sent,t.next=13,o.json();case 13:s=t.sent,a="valid_new_id"===s.details;case 15:e.setState((function(e){return{newCourse:Object(i.a)(Object(i.a)({},e.newCourse),{},{validCourseId:a})}})),a&&e.handleNextClick();case 17:case"end":return t.stop()}}),t)}))),e.deleteAsset=function(){var t=Object(pe.a)(me.a.mark((function t(a){var n,r,l,o;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Rt+"/assets/"+e.state.newCourse.course_id+a,r={method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":window.props.csrfToken}},t.next=4,fetch(n,r);case 4:return l=t.sent,t.next=7,l.json();case 7:o=t.sent,console.log(o);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getcourseInfo=function(){var t=Object(pe.a)(me.a.mark((function t(a,n){var r,l,o,s;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="/tma_apps/quickstart/getCourseInfo/"+a,l={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}},t.next=4,fetch(r,l);case 4:return o=t.sent,t.next=7,o.json();case 7:s=t.sent,e.setState({newCourse:Object(i.a)(Object(i.a)(Object(i.a)({},n),{},{course_session:n.course_id.replace("course-v1:","").split("+")[2],course_number:n.course_id.replace("course-v1:","").split("+")[1],validCourseId:"configure"===e.props.editMode},s),{},{org:"configure"===e.props.editMode?s.org:window.props.zone?window.props.zone:s.org})});case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.launchCourseCreation=function(){var t=Object(pe.a)(me.a.mark((function t(a){var n,r,l,o;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.handleNextClick(),n=window.props.api.courseCreationUrl,console.log(n),console.log(e.getFormData()),r={method:"POST",body:e.getFormData(),contentType:!1,processData:!1},t.next=8,fetch(n,r);case 8:return l=t.sent,t.next=11,l.json();case 11:"404"!==(o=t.sent).code&&e.setState({newCourseResponse:o});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getCourseEffort=function(){return(3600*e.state.newCourse.effort[0]||0)+(60*e.state.newCourse.effort[1]||0)},e.getFormData=function(){var t=new FormData;return Object.entries(e.state.newCourse).forEach((function(a){if(["course_image","teacher_image"].includes(a[0])&&Array.isArray(a[1]))t.append(a[0],e.state.newCourse[a[0]][0]);else if("effort"===a[0])t.append("effort",e.getCourseEffort());else if(["course_type","course_settings"].includes(a[0])){window.props.fields.find((function(e){return e.name===a[0]})).options.map((function(e){return t.append(e,a[1].includes(e))}))}else if("course_map"===a[0])t.append("course_map",JSON.stringify(e.state.newCourse.course_map));else if("course_downloads"===a[0]){var n=[];e.state.newCourse.course_downloads.forEach((function(e,a){t.append("course_downloads"+a,e.file),n.push(e.title)})),t.append("download_files_titles",JSON.stringify(n))}else"actual_course_downloads"===a[0]?t.append("actual_course_downloads",JSON.stringify(a[1])):t.append(a[0],a[1])})),t.append("editMode",e.props.editMode),t},e.handleBackClick=function(){e.setState((function(e){return{step:e.step-1}}))},e.handleFieldChange=function(t,a){["course_session","course_number"].includes(t)&&(a=a.replace(/ /g,"").replace(/[^a-zA-Z0-9\-]/g,"").toLowerCase()),e.setState((function(e){var n;return{newCourse:Object(i.a)(Object(i.a)({},e.newCourse),{},(n={},Object(fe.a)(n,t,a),Object(fe.a)(n,"validCourseId",!0),n))}}))},e.toggleDialog=function(){e.setState((function(e){return{cancelCreationPopup:!e.cancelCreationPopup}}))},e.eraseNewCourse=function(){e.setState({newCourse:Mt,step:1,cancelCreationPopup:!1,selectedCourse:void 0,mode:void 0},window.location.href="/")},e.getContext=function(){return Object(i.a)(Object(i.a)({},e.state),{},{handleFieldChange:e.handleFieldChange,handleNextClick:e.handleNextClick,addCourseDetails:e.addCourseDetails,toggleDialog:e.toggleDialog,handleBackClick:e.handleBackClick,launchCourseCreation:e.launchCourseCreation,checkCourseId:e.checkCourseId,eraseNewCourse:e.eraseNewCourse,editMode:e.props.editMode,blockedFields:e.state.blockedFields,deleteAsset:e.deleteAsset})},e}return Object(c.a)(a,[{key:"componentWillMount",value:function(){var e=this.props.match.params.referredCourseId;if(e){var t=this.state.courses.find((function(t){return t.course_id===e}));this.getcourseInfo(e,t),this.setState({mode:"configure"===this.props.editMode?"configure":"re-run",step:1,blockedFields:"configure"===this.props.editMode?["org","course_number","course_session","course_pacing"]:["org"]})}}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{value:this.getContext()},r.a.createElement(O,null),r.a.createElement("div",{className:e.createPageWrapper},r.a.createElement(It,null)),r.a.createElement(Lt,{openDialog:this.state.cancelCreationPopup,toggleDialog:this.toggleDialog,dialogTitle:zt.cancelCreationTitle,dialogContent:zt.cancelCreationContent,dialogValid:zt.validCancelCreation,dialogCancel:zt.backToCourse,dialogAction:this.eraseNewCourse})))}}]),a}(n.Component),Ht=Object(m.a)(C)(Ut);[].concat.apply([],window.props&&window.props.createProgramSteps),window.props.lmsBase;var Vt=function(e){var t=e.newProgram,a=e.translations,l=e.classes;return r.a.createElement("div",null,r.a.createElement("h3",null,a.verifyProgramInfo||"Please verify program info before launching update"),["program_name","program_org","start_date","end_date","program_type","courses_list"].map((function(e,o){return r.a.createElement("div",{key:o},function(e){var t;if(t="boolean"===typeof e[1]?r.a.createElement("span",null,a[e[1].toString()]):null===e[1]?r.a.createElement("span",null,a.nullValue||"No value provided"):Array.isArray(e[1])?e[1].map((function(e,t){return r.a.createElement(n.Fragment,{key:t},r.a.createElement("br",null),r.a.createElement("span",null,a.stepFields[e+"_title"]||e.course_name||e||"Not defined"))})):"start_date"===e[0]||"end_date"===e[0]?r.a.createElement(Ae.a,{locale:"fr"===window.props.currentLanguage?"fr":"en",format:"LL"},e[1].toString()):r.a.createElement("span",null,a.stepFields[e[1]+"_title"]||e[1]))return r.a.createElement("p",null,r.a.createElement("span",{className:l.programSummaryTitle},a.stepFields[e[0]+"_title"]||e[0],":")," ",t)}([e,t[e]]))})))},qt=window.props&&window.props.translations;var Jt=Object(m.a)(C)((function(e){var t=e.classes;return r.a.createElement(p.Consumer,null,(function(e){var a=e.newProgramResponse,n=e.eraseNewProgram;return r.a.createElement("div",{className:t.loadingPage},a?r.a.createElement(Yt,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,qt.waitProgramCreation||"Your course is beeing created please wait."),r.a.createElement("h4",null,qt.mayTakeSomeTimeCreateProgram||"Creating your program may take some time..."),r.a.createElement("div",{onClick:function(){return n()},style:{cursor:"pointer"}},r.a.createElement("h4",null,qt.mayTakeSomeTimeLinkCreate||"Click here to reload the page, your program should appear within the next 10 minutes.")),r.a.createElement(K.a,{type:"Puff",color:window.props.colors.mainColor,height:"100",width:"100"})))}))})),Yt=function(){return r.a.createElement(p.Consumer,null,(function(e){var t=e.newProgramResponse,a=e.newProgram,n=e.eraseNewProgram;return r.a.createElement(r.a.Fragment,null,"error"!==t.status?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(Me.a,{style:{fontSize:90,color:window.props.colors.mainColor}})),r.a.createElement("h3",null,qt.programHasBeenCreated||"Your program has been created"),r.a.createElement("h4",null,qt.stepFields.program_name_title+": "+a.program_name),r.a.createElement(F.a,{container:!0,spacing:6,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(F.a,{item:!0},r.a.createElement(k.a,{href:t.edit_link,onClick:function(){return n()}},qt.seeMyCourse)),r.a.createElement(F.a,{item:!0},r.a.createElement(j.b,{to:"/"},r.a.createElement(k.a,{onClick:function(){return n()}},qt.backToHomePage))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(Ue.a,{style:{fontSize:90,color:"red"}})),r.a.createElement("h3",null,qt.errorWhileCreatingCourse),r.a.createElement("h4",null,qt.programNotCreated),r.a.createElement(F.a,{container:!0,spacing:6,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(F.a,{item:!0},r.a.createElement(j.b,{to:"/"},r.a.createElement(k.a,{onClick:function(){return n()}},qt.backToHomePage))))))}))},$t=window.props&&window.props.translations,Gt=Object(E.a)(C)((function(e){var t=e.field,a=e.defaultValue,n=e.handleSearchBar,l=e.handleSelectCourses,o=e.handleRemoveCourses,i=e.fixedField,s=e.newProgram,c=e.courses;return r.a.createElement(F.a,{container:!0},r.a.createElement(F.a,{container:!0,direction:"column",item:!0,md:6,xs:12},r.a.createElement(he.a,{defaultValue:$t.stepFields[t.name+"_bar_default_value"],margin:"normal",value:a,InputProps:i?{readOnly:!0}:{},onChange:function(e){return n("".concat(t.name,"_bar"),e.target.value)},variant:"outlined"}),s.courses_list_bar&&0===c.length&&r.a.createElement(Ee.a,{error:!0,id:"component-error-text"},$t.noCourseResult),a&&c.length>0&&c.map((function(e,a){return r.a.createElement(we.a,{key:a,value:e,style:{borderBottom:"1px solid rgba(29,159,229,0.5)"},onClick:function(){return l(t.name,e)}},e.course_id)}))),r.a.createElement(F.a,{container:!0,direction:"column",alignItems:"center",item:!0,md:6,xs:12},s.courses_list&&s.courses_list.map((function(e){return r.a.createElement(F.a,{container:!0,justify:"space-between",alignItems:"center",item:!0,md:6,xs:8,key:e.course_id},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",margin:"5px 0"}},r.a.createElement("div",{style:{color:window.props.colors.mainColor,fontWeight:900}},e.course_name),r.a.createElement("div",null,e.course_id)),r.a.createElement("i",{onClick:function(){return o(t.name,e)},className:"fas fa-times",style:{color:"red",cursor:"pointer"}}))}))))})),Xt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(s.a)(this,a),(n=t.call(this,e)).createFields=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=n.context,a=t.handleFieldChange,l=t.handleSelectCourses,o=t.handleRemoveCourses,i=t.handleSearchBar,s=t.newProgram,c=t.translations,u=t.courses,d=t.addProgramDetails,m=n.props.classes;return e.map((function(e,t){switch(e.type){case"text":return r.a.createElement(At,{key:t,field:e},r.a.createElement(tt,{field:e,defaultValue:s[e.name]||"",handleFieldChange:a,newProgram:s}));case"select":return r.a.createElement(At,{key:t,field:e},r.a.createElement($e,{field:e,value:s[e.name]||[],addCourseDetails:d}));case"checkBox":return r.a.createElement(At,{key:t,field:e},r.a.createElement(it,{field:e,addCourseDetails:d,value:s}));case"date":return r.a.createElement("div",{key:t,className:m.mediumWrapper+" "+m.fieldWrapper},r.a.createElement("h3",{className:m.fieldTitle},c.stepFields.program_dates_title),r.a.createElement("p",null,c.stepFields.program_dates_title_helper),r.a.createElement(Se,{type:"start_date",addCourseDetails:d,translations:c,value:s.start_date}),r.a.createElement(Se,{type:"end_date",addCourseDetails:d,translations:c,value:s.end_date}));case"searchBar":return r.a.createElement(At,{key:t,field:e},r.a.createElement(Gt,{field:e,defaultValue:s["".concat(e.name,"_bar")]||"",handleSearchBar:i,handleSelectCourses:l,handleRemoveCourses:o,newProgram:s,courses:u}));default:return""}}))},n.validProgramParameters=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!0,a=n.context.newProgram;return e.forEach((function(e){e.required&&!a[e.name]&&(t=!1)})),t};var l={};return window.props.createProgramSteps.forEach((function(e,t){var a=e.map((function(e,t){return window.props.fields.find((function(t){return t.name===e}))}));l["step"+(t+1)]=a})),n.state=l,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.context,t=e.step,a=e.selectedProgram,n=e.translations,l=e.newProgram,o=e.toggleDialog,i=e.handleBackClick,s=e.handleNextClick,c=e.launchProgramCreation,u=e.deleteAsset,d=this.props.classes,m=this.state["step"+t],p=!this.validProgramParameters(m);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:d.bandeau},[1,2,3].includes(t)?r.a.createElement(G.a,null,"Step ",t,"/3"):r.a.createElement("h3",{className:d.bandeauTitle},n.stepFields.programSummary),r.a.createElement("h3",{className:d.bandeauTitle},"Create Program - Mode")),r.a.createElement("div",{className:d.createCourseWrapper},[1,2,3,4].includes(t)&&this.createFields(m,a,u),4===t&&r.a.createElement(Vt,{newProgram:l,translations:n,classes:d}),5===t&&r.a.createElement(Jt,null)),[1,2,3,4].includes(t)&&r.a.createElement("div",{className:d.createButtonsWrapper},r.a.createElement("span",null,[2,3,4].includes(t)&&r.a.createElement(k.a,{onClick:function(){return i()},className:d.backButton},n.back),[1].includes(t)&&r.a.createElement(k.a,{disabled:p,onClick:function(){return s()},className:p?d.disabledBtn:"",style:{marginLeft:10}},n.next),[2,3].includes(t)&&r.a.createElement(k.a,{disabled:p,onClick:function(){return s()},style:{marginLeft:10}},n.next)),4===t&&r.a.createElement(k.a,{disabled:p,onClick:function(e){return c(e)}},n.createProgram||"Create Program"),r.a.createElement(k.a,{className:d.cancelButton,onClick:function(){return o()}},n.cancel)))}}]),a}(n.Component);Xt.contextType=p;var Kt=Object(E.a)(C)(Xt),Qt=window.props&&window.props.programBasis,Zt=window.props&&window.props.translations,ea=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={translations:window.props.translations,programs:window.props.programs||[],courses:window.props.courses||[],step:1,selectedProgram:void 0,newProgram:Qt,cancelCreationPopup:!1,newProgramResponse:void 0,blockedFields:[]},e.addProgramDetails=function(t){e.setState((function(e){return{newProgram:Object(i.a)(Object(i.a)({},e.newProgram),{},Object(fe.a)({},t.name,t.value))}}))},e.handleNextClick=function(){e.setState((function(e){return{step:e.step+1}}))},e.handleBackClick=function(){e.setState((function(e){return{step:e.step-1}}))},e.toggleDialog=function(){e.setState((function(e){return{cancelCreationPopup:!e.cancelCreationPopup}}))},e.handleFieldChange=function(t,a){e.setState((function(e){return{newProgram:Object(i.a)(Object(i.a)({},e.newProgram),{},Object(fe.a)({},t,a))}}))},e.handleSearchBar=function(t,a){var n=e.state.newProgram,r=window.props.courses.filter((function(e){return e.course_id.includes(a)&&!e.course_id.includes("duplicated")&&e.course_id.includes(n.program_org)}));e.setState((function(e){return{newProgram:Object(i.a)(Object(i.a)({},e.newProgram),{},Object(fe.a)({},t,a)),courses:r}}))},e.handleSelectCourses=function(t,a){var n=[];e.state.newProgram[t]||e.setState((function(e){var a;return{newProgram:Object(i.a)(Object(i.a)({},e.newProgram),{},(a={},Object(fe.a)(a,t,[]),Object(fe.a)(a,"".concat(t,"_bar"),""),a))}})),e.state.newProgram[t]&&e.state.newProgram[t].length>0&&(n=Object(ge.a)(e.state.newProgram[t])),n.includes(a)||n.push(a),e.setState((function(e){var a;return{newProgram:Object(i.a)(Object(i.a)({},e.newProgram),{},(a={},Object(fe.a)(a,t,n),Object(fe.a)(a,"".concat(t,"_bar"),""),a))}}))},e.handleRemoveCourses=function(t,a){var n=Object(ge.a)(e.state.newProgram[t]);if(console.log(n.indexOf(a)),n.includes(a)){var r=n.indexOf(a);n.splice(r,1)}e.setState((function(e){return{newProgram:Object(i.a)(Object(i.a)({},e.newProgram),{},Object(fe.a)({},t,n))}}))},e.eraseNewProgram=function(){e.setState({newProgram:{},step:1,cancelCreationPopup:!1,selectedCourses:[]},window.location.href="/")},e.launchProgramCreation=function(){var t=Object(pe.a)(me.a.mark((function t(a){var n,r,l,o;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.handleNextClick(),n=window.props.api.programCreationUrl,r={method:"POST",body:e.getFormData(),contentType:!1,processData:!1,headers:{"X-CSRFToken":window.props.csrfToken}},t.next=6,fetch(n,r);case 6:return l=t.sent,t.next=9,l.json();case 9:"404"!==(o=t.sent).code&&e.setState({newProgramResponse:o});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getFormData=function(){var t=new FormData;return Object.entries(e.state.newProgram).forEach((function(e){if("courses_list_bar"!==e[0]&&"program_org"!==e[0])if("program_type"===e[0])window.props.fields.find((function(t){return t.name===e[0]})).options.map((function(a){return t.append(a,e[1].includes(a))}));else if("courses_list"===e[0]){var a=[];e[1].forEach((function(e){a.push(e.course_id)})),t.append(e[0],a)}else t.append(e[0],e[1])})),t},e.getContext=function(){return Object(i.a)(Object(i.a)({},e.state),{},{handleSearchBar:e.handleSearchBar,handleFieldChange:e.handleFieldChange,handleNextClick:e.handleNextClick,addProgramDetails:e.addProgramDetails,toggleDialog:e.toggleDialog,handleBackClick:e.handleBackClick,launchProgramCreation:e.launchProgramCreation,eraseNewProgram:e.eraseNewProgram,deleteAsset:e.deleteAsset,handleSelectCourses:e.handleSelectCourses,handleRemoveCourses:e.handleRemoveCourses})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{value:this.getContext()},r.a.createElement(O,null),r.a.createElement("div",{className:e.createPageWrapper},r.a.createElement(Kt,null)),r.a.createElement(Lt,{openDialog:this.state.cancelCreationPopup,toggleDialog:this.toggleDialog,dialogTitle:Zt.cancelProgramTitle,dialogContent:Zt.cancelProgramContent,dialogValid:Zt.validCancelCreation,dialogCancel:Zt.backToProgram,dialogAction:this.eraseNewProgram})))}}]),a}(n.Component),ta=Object(m.a)(C)(ea),aa=Object(m.a)(C)((function(e){var t=e.classes,a=e.setModeRerun;return r.a.createElement("div",{className:t.IntroStepWrapper},r.a.createElement("h1",{className:t.stepTitle},"Quick Start"),r.a.createElement("p",{className:t.stepHelper},"Choose the way you want to create a course"),r.a.createElement("div",{className:t.buttonWrapper},r.a.createElement(k.a,{onClick:function(e){return a()}},"Start from an existing course")),r.a.createElement("div",{className:t.buttonWrapper},r.a.createElement(j.b,{to:"/create/"},r.a.createElement(k.a,{className:t.createNewBtn},"Create new course"))))})),na=Object(m.a)(C)((function(e){var t=e.classes,a=e.course;e.setCourse;return r.a.createElement(_.a,{className:t.courseElementWrapper},r.a.createElement(F.a,{container:!0,style:{maxHeight:150}},r.a.createElement(F.a,{item:!0,xs:9,className:t.courseElementInfo},r.a.createElement(G.a,{className:t.courseElementtitle},a.course_name),r.a.createElement(G.a,null,a.course_id)),r.a.createElement(F.a,{item:!0,xs:3,className:t.flexCenter},r.a.createElement(j.b,{to:"/create/"+a.course_id,style:{height:"100%",maxHeight:150}},r.a.createElement(k.a,{className:t.choseBtn},r.a.createElement(G.a,null,"Choose this course"))))))})),ra=Object(m.a)(C)((function(e){var t=e.classes,a=window.props.courses.filter((function(e){return window.props.orgs.includes(e.org)}));return r.a.createElement("div",null,r.a.createElement("h1",{className:t.stepTitle},"Course-Rerun"),r.a.createElement("p",{className:t.stepHelper},"Select a Course :"),r.a.createElement("div",{className:t.courseListWrapper},a.map((function(e,t){return r.a.createElement(na,{course:e,key:t})}))))})),la=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={rerunDisplay:!1},e.setModeRerun=function(){e.setState({rerunDisplay:!0})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state.rerunDisplay;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null),e?r.a.createElement(ra,null):r.a.createElement(aa,{setModeRerun:this.setModeRerun}))}}]),a}(n.Component),oa=Object(m.a)(C)(la),ia=a(791),sa=a(792),ca=a(378),ua=a(35),da=a(376),ma=a.n(da),pa=Object(ca.a)({palette:{primary:{main:"#009FE5"},secondary:{main:"#009FE5"}},overrides:{MuiButton:{text:{fontSize:"0.9rem",border:"none",borderRadius:25,padding:"8px 25px",cursor:"pointer",backgroundColor:"#009FE5",fontWeight:"bold",textTransform:"initial",color:"white!important"}}}}),fa=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ia.a,null),r.a.createElement(sa.a,{theme:pa},r.a.createElement(j.a,{basename:"/"},r.a.createElement(ua.a,{exact:!0,path:"/",component:function(){return r.a.createElement(ue,null)}}),r.a.createElement(ua.a,{path:"/create/:referredCourseId?",component:function(e){return r.a.createElement(Ht,Object.assign({},e,{editMode:"create"}))}}),r.a.createElement(ua.a,{path:"/select-mode/",component:function(e){return r.a.createElement(oa,e)}}),r.a.createElement(ua.a,{path:"/configure/:referredCourseId?",component:function(e){return r.a.createElement(Ht,Object.assign({},e,{editMode:"configure"}))}}),r.a.createElement(ua.a,{path:"/create-program",component:function(e){return r.a.createElement(ta,Object.assign({},e,{editMode:"create"}))}}))))},ga={ie:function(){return r.a.createElement("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem"}},"Please open this interface on Chrome")},default:function(e){return r.a.createElement(fa,null)}};var ha=function(){return r.a.createElement("div",null,r.a.createElement(ma.a,null,ga))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ha,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[392,1,2]]]);
//# sourceMappingURL=main.026f21a0.chunk.js.map